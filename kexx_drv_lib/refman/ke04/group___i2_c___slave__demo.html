<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Kinetis E Peripheral Drivers: I2C Slave Demo</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script src="http://www.mathjax.org/mathjax/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="drivers.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="fsl_logo.gif"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Kinetis E Peripheral Drivers
   &#160;<span id="projectnumber">KE_DRV_1.2.1</span>
   </div>
   <div id="projectbrief">Reference Manual</div>
  </td>
 </tr>
 </tbody>
</table>
</div>	
<!-- end header part -->
<!-- Generated by Doxygen 1.8.4 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Introduction</span></a></li>
      <li><a href="pages.html"><span>Pages</span></a></li>
      <li><a href="modules.html"><span>Reference</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">I2C Slave Demo<div class="ingroups"><a class="el" href="group__i2c__examples.html">I2C Examples</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<p>This example demonstrates typical use of the Inter-Integrated Circuits (I2C) Driver with slave mode. For more detail description on this example, please read <a class="el" href="_i2_c__slave_demo_readme.html">IIC Slave Demo</a> readme. </p>
<dl class="section user"><dt>Source code:</dt><dd><div class="fragment"><div class="line"></div>
<div class="line"><span class="comment">/******************************************************************************</span></div>
<div class="line"><span class="comment">*</span></div>
<div class="line"><span class="comment">* Freescale Semiconductor Inc.</span></div>
<div class="line"><span class="comment">* (c) Copyright 2013 Freescale Semiconductor, Inc.</span></div>
<div class="line"><span class="comment">* ALL RIGHTS RESERVED.</span></div>
<div class="line"><span class="comment">*</span></div>
<div class="line"><span class="comment">***************************************************************************</span></div>
<div class="line"><span class="comment">*</span></div>
<div class="line"><span class="comment">* THIS SOFTWARE IS PROVIDED BY FREESCALE &quot;AS IS&quot; AND ANY EXPRESSED OR</span></div>
<div class="line"><span class="comment">* IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES</span></div>
<div class="line"><span class="comment">* OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.</span></div>
<div class="line"><span class="comment">* IN NO EVENT SHALL FREESCALE OR ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT,</span></div>
<div class="line"><span class="comment">* INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES</span></div>
<div class="line"><span class="comment">* (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR</span></div>
<div class="line"><span class="comment">* SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)</span></div>
<div class="line"><span class="comment">* HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,</span></div>
<div class="line"><span class="comment">* STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING</span></div>
<div class="line"><span class="comment">* IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF</span></div>
<div class="line"><span class="comment">* THE POSSIBILITY OF SUCH DAMAGE.</span></div>
<div class="line"><span class="comment">*</span></div>
<div class="line"><span class="comment">***************************************************************************/</span></div>
<div class="line"><span class="preprocessor">#include &quot;common.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;ics.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;rtc.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;uart.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;i2c.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;i2C_app.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;sysinit.h&quot;</span></div>
<div class="line"><span class="comment">/******************************************************************************</span></div>
<div class="line"><span class="comment">* Global variables</span></div>
<div class="line"><span class="comment">******************************************************************************/</span></div>
<div class="line"></div>
<div class="line"><span class="comment">/******************************************************************************</span></div>
<div class="line"><span class="comment">* Constants and macros</span></div>
<div class="line"><span class="comment">******************************************************************************/</span></div>
<div class="line"><span class="preprocessor">#define I2C_SLAVE_ADDRESS       0x50&lt;&lt;1</span></div>
<div class="line"><span class="preprocessor"></span><span class="comment">/******************************************************************************</span></div>
<div class="line"><span class="comment">* Local types</span></div>
<div class="line"><span class="comment">******************************************************************************/</span></div>
<div class="line"></div>
<div class="line"><span class="comment">/******************************************************************************</span></div>
<div class="line"><span class="comment">* Local function prototypes</span></div>
<div class="line"><span class="comment">******************************************************************************/</span></div>
<div class="line"></div>
<div class="line"><span class="comment">/******************************************************************************</span></div>
<div class="line"><span class="comment">* Local variables</span></div>
<div class="line"><span class="comment">******************************************************************************/</span></div>
<div class="line">uint8_t u8I2C_SendBuff[64];</div>
<div class="line">uint8_t u8I2C_ReceiveBuff[64];</div>
<div class="line"><span class="comment">/******************************************************************************</span></div>
<div class="line"><span class="comment">* Local functions</span></div>
<div class="line"><span class="comment">******************************************************************************/</span></div>
<div class="line"><span class="keywordtype">int</span> main (<span class="keywordtype">void</span>);</div>
<div class="line"><span class="keywordtype">void</span> RTC_Task(<span class="keywordtype">void</span>);</div>
<div class="line"><span class="comment">/******************************************************************************</span></div>
<div class="line"><span class="comment">* Global functions</span></div>
<div class="line"><span class="comment">******************************************************************************/</span></div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="comment">/********************************************************************/</span></div>
<div class="line"><span class="keywordtype">int</span> main (<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    uint8_t         u8I2C_ReceiveLength;</div>
<div class="line">    uint32_t        i;</div>
<div class="line"></div>
<div class="line">    <a class="code" href="group__i2c__config__type.html#struct_i2_c___config_type" title="I2C configure type. ">I2C_ConfigType</a>  sI2C_Config = {0};</div>
<div class="line">    </div>
<div class="line">    <span class="comment">/* Perform processor initialization */</span></div>
<div class="line">      sysinit();</div>
<div class="line">     </div>
<div class="line">    printf(<span class="stringliteral">&quot;\r\nRunning the I2C_Slave_demo project.\r\n&quot;</span>);</div>
<div class="line">    LED0_Init();  </div>
<div class="line">    LED2_Init();</div>
<div class="line"></div>
<div class="line">    <a class="code" href="group__uart__api__list.html#gaba71c7772bb3a939e6e997f30753de33" title="wait tx complete. ">UART_WaitTxComplete</a>(TERM_PORT);   </div>
<div class="line">    </div>
<div class="line">    <span class="comment">/* initialize I2C global variable and call back function*/</span></div>
<div class="line">    I2C_InitGlobalVariable(  );</div>
<div class="line"> </div>
<div class="line">    </div>
<div class="line">    sI2C_Config.<a class="code" href="group__i2c__config__type.html#a76f19995aa175404ed79ee591154d153">u16Slt</a> = 0;</div>
<div class="line">    sI2C_Config.<a class="code" href="group__i2c__config__type.html#ae8787af6fce21b11321a472d2ff4bd78">u16F</a> = 0x1F;</div>
<div class="line">    sI2C_Config.<a class="code" href="group__i2c__config__type.html#a8abab8d6cf98708019e06d616873e802">u16OwnA1</a> = I2C_SLAVE_ADDRESS;</div>
<div class="line">    sI2C_Config.sSetting.<a class="code" href="group__i2c__setting__type.html#ae64a1d424751b9275ed3e431422efd92">bIntEn</a> = 1;</div>
<div class="line">    sI2C_Config.sSetting.<a class="code" href="group__i2c__setting__type.html#a071a371894011ae41dc1b3e1fe1dad2c">bI2CEn</a> = 1;</div>
<div class="line"></div>
<div class="line">    <a class="code" href="group__i2c__api__list.html#gab7bf14ec0e5177ba55bf9b616a02486e" title="Initialize I2C module. ">I2C_Init</a>(I2C0,&amp;sI2C_Config);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">for</span>(i=0;i&lt;64;i++)</div>
<div class="line">    {</div>
<div class="line">        u8I2C_SendBuff[i] = i;</div>
<div class="line">    }</div>
<div class="line">    u8I2C_SendBuff[0] = 0xa0;</div>
<div class="line">    I2C_SlaveSend(u8I2C_SendBuff,64);</div>
<div class="line">    </div>
<div class="line">    <span class="comment">/* echo chars received from terminal */</span></div>
<div class="line">    <span class="keywordflow">while</span>(1)</div>
<div class="line">    {</div>
<div class="line">        u8I2C_ReceiveLength = I2C_SlaveReceive(&amp;u8I2C_ReceiveBuff[0]);</div>
<div class="line">        <span class="keywordflow">if</span>( u8I2C_ReceiveLength &lt; 64 )</div>
<div class="line">        {</div>
<div class="line">            <span class="comment">/* send the old data to master */</span></div>
<div class="line">            I2C_SlaveSend(&amp;u8I2C_SendBuff[0],64);</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">        {</div>
<div class="line">            <span class="comment">/* send the newest data received from master */</span></div>
<div class="line">            I2C_SlaveSend(&amp;u8I2C_ReceiveBuff[0],64);</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">if</span>( u8I2C_ReceiveLength )</div>
<div class="line">        {</div>
<div class="line">            printf(<span class="stringliteral">&quot;\r\nI2C received data:\r\n&quot;</span>);</div>
<div class="line">            <span class="keywordflow">for</span>(i=0;i&lt;u8I2C_ReceiveLength;i++)</div>
<div class="line">            {</div>
<div class="line">                <span class="keywordflow">if</span>( (i%8) == 0 )</div>
<div class="line">                {</div>
<div class="line">                   printf(<span class="stringliteral">&quot;\r\n\r\n&quot;</span>); </div>
<div class="line">                }</div>
<div class="line">                printf(<span class="stringliteral">&quot;0x%x,&quot;</span>, u8I2C_ReceiveBuff[i]);</div>
<div class="line">            }</div>
<div class="line">            printf(<span class="stringliteral">&quot;\r\n\r\n&quot;</span>);</div>
<div class="line">        }</div>
<div class="line">        <span class="comment">//delay</span></div>
<div class="line">        <span class="keywordflow">for</span>(i=0;i&lt;0xfffff;i++);</div>
<div class="line">    } </div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/*****************************************************************************/</span></div>
<div class="line"><span class="keywordtype">void</span> RTC_Task(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">/* toggle LED1 */</span></div>
<div class="line">    LED0_Toggle();</div>
<div class="line">}</div>
<div class="line"><span class="comment">/********************************************************************/</span></div>
</div><!-- fragment --> <div class="fragment"><div class="line"><span class="comment">/******************************************************************************</span></div>
<div class="line"><span class="comment">*</span></div>
<div class="line"><span class="comment">* Freescale Semiconductor Inc.</span></div>
<div class="line"><span class="comment">* (c) Copyright 2013 Freescale Semiconductor, Inc.</span></div>
<div class="line"><span class="comment">* ALL RIGHTS RESERVED.</span></div>
<div class="line"><span class="comment">*</span></div>
<div class="line"><span class="comment">***************************************************************************</span></div>
<div class="line"><span class="comment">*</span></div>
<div class="line"><span class="comment">* THIS SOFTWARE IS PROVIDED BY FREESCALE &quot;AS IS&quot; AND ANY EXPRESSED OR</span></div>
<div class="line"><span class="comment">* IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES</span></div>
<div class="line"><span class="comment">* OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.</span></div>
<div class="line"><span class="comment">* IN NO EVENT SHALL FREESCALE OR ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT,</span></div>
<div class="line"><span class="comment">* INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES</span></div>
<div class="line"><span class="comment">* (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR</span></div>
<div class="line"><span class="comment">* SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)</span></div>
<div class="line"><span class="comment">* HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,</span></div>
<div class="line"><span class="comment">* STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING</span></div>
<div class="line"><span class="comment">* IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF</span></div>
<div class="line"><span class="comment">* THE POSSIBILITY OF SUCH DAMAGE.</span></div>
<div class="line"><span class="comment">*</span></div>
<div class="line"><span class="comment">***************************************************************************/</span></div>
<div class="line"><span class="preprocessor">#include &quot;common.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;i2c.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;i2c_app.h&quot;</span></div>
<div class="line"></div>
<div class="line"><span class="comment">/******************************************************************************</span></div>
<div class="line"><span class="comment">* Global variables</span></div>
<div class="line"><span class="comment">******************************************************************************/</span></div>
<div class="line"></div>
<div class="line"><span class="comment">/******************************************************************************</span></div>
<div class="line"><span class="comment">* Constants and macros</span></div>
<div class="line"><span class="comment">******************************************************************************/</span></div>
<div class="line"></div>
<div class="line"><span class="comment">/******************************************************************************</span></div>
<div class="line"><span class="comment">* Local types</span></div>
<div class="line"><span class="comment">******************************************************************************/</span></div>
<div class="line"></div>
<div class="line"><span class="comment">/******************************************************************************</span></div>
<div class="line"><span class="comment">* Local function prototypes</span></div>
<div class="line"><span class="comment">******************************************************************************/</span></div>
<div class="line"></div>
<div class="line"><span class="comment">/******************************************************************************</span></div>
<div class="line"><span class="comment">* Local variables</span></div>
<div class="line"><span class="comment">******************************************************************************/</span></div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <a class="code" href="struct_i2_c___master_send_type.html" title="I2C master send data type. ">I2C_MasterSendType</a> sI2C_MasterSendInfo = {0};</div>
<div class="line"><span class="keyword">static</span> <a class="code" href="struct_i2_c___master_receive_type.html" title="I2C master receive data type. ">I2C_MasterReceiveType</a> sI2C_MasterReceiveInfo = {0};</div>
<div class="line"><span class="keyword">static</span> <a class="code" href="struct_i2_c___slave_send_type.html" title="I2C slave send data type. ">I2C_SlaveSendType</a> sI2C_SlaveSendInfo = {0};</div>
<div class="line"><span class="keyword">static</span> <a class="code" href="struct_i2_c___slave_receive_type.html" title="I2C slave receive data type. ">I2C_SlaveReceiveType</a> sI2C_SlaveReceiveInfo = {0};</div>
<div class="line"><span class="comment">//static uint8_t u8I2C_BusStatus = I2C_BUS_NORMAL;</span></div>
<div class="line"></div>
<div class="line"><span class="comment">/******************************************************************************</span></div>
<div class="line"><span class="comment">* Local functions</span></div>
<div class="line"><span class="comment">******************************************************************************/</span></div>
<div class="line"></div>
<div class="line"><span class="comment">/******************************************************************************</span></div>
<div class="line"><span class="comment">* Global functions</span></div>
<div class="line"><span class="comment">******************************************************************************/</span></div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="comment">/*****************************************************************************/</span></div>
<div class="line"><span class="keywordtype">void</span> I2C_CallBack( <span class="keywordtype">void</span> )</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="group__i2c__api__list.html#ga96372a9fce4d5ab52f295bc3419aba30" title="clear specified status. ">I2C_ClearStatus</a>(I2C0,I2C_S_IICIF_MASK);</div>
<div class="line">    <span class="keywordflow">if</span>( <a class="code" href="group__i2c__api__list.html#gacda9405d30b4c0e3490ae87009759abe" title="get I2C status. ">I2C_GetStatus</a>(I2C0) &amp; I2C_S_ARBL_MASK )</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="group__i2c__api__list.html#ga96372a9fce4d5ab52f295bc3419aba30" title="clear specified status. ">I2C_ClearStatus</a>(I2C0,I2C_S_ARBL_MASK);</div>
<div class="line">        <span class="keywordflow">if</span>( !(<a class="code" href="group__i2c__api__list.html#gacda9405d30b4c0e3490ae87009759abe" title="get I2C status. ">I2C_GetStatus</a>(I2C0) &amp; I2C_S_IAAS_MASK) )</div>
<div class="line">        {</div>
<div class="line">            <span class="comment">// IIAAS is 0</span></div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span>( <a class="code" href="group__i2c__api__list.html#ga98992168d083dbc013a2ebb91e5a54e1" title="check SCL Low Timeout Flag. ">I2C_IsSMB_SLTF</a>(I2C0) )</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">/* clear this flag */</span></div>
<div class="line">        <a class="code" href="group__i2c__api__list.html#ga7bca069c9fea75b16f952d3a5c5a3997" title="clear SLTF flag. ">I2C_ClearSLTF</a>(I2C0);</div>
<div class="line"></div>
<div class="line">        <span class="comment">/* Scl holding low over specified counter, add your code in here */</span></div>
<div class="line">        <span class="comment">//u8I2C_BusStatus |= I2C_BUS_SLTF;</span></div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span>( <a class="code" href="group__i2c__api__list.html#gaa714505521034757c4f2c4d2ff524031" title="check SCL High Timeout Flag is set or clear. ">I2C_IsSMB_SHTF2</a>(I2C0) )</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">/* clear this flag */</span></div>
<div class="line">        <a class="code" href="group__i2c__api__list.html#ga8ee42c33c02cc13814f14d2e35ba4c25" title="clear SHTF2 flag. ">I2C_ClearSHTF2</a>(I2C0);</div>
<div class="line"></div>
<div class="line">        <span class="comment">/* Scl holding low over specified counter, add your code in here */</span></div>
<div class="line">        <span class="comment">//u8I2C_BusStatus |= I2C_BUS_SHTF2;</span></div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">if</span>( <a class="code" href="group__i2c__api__list.html#gabac74cf7dcca73ca1b0882696717200b" title="check I2C if is master mode. ">I2C_IsMasterMode</a>(I2C0) )</div>
<div class="line">    {</div>
<div class="line">        I2C_MasterIntProcessing();</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">    {</div>
<div class="line">        I2C_SlaveIntProcessing();</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/*****************************************************************************/</span></div>
<div class="line"><span class="keywordtype">void</span> I2C_InitGlobalVariable( <span class="keywordtype">void</span> )</div>
<div class="line">{</div>
<div class="line">    </div>
<div class="line">    sI2C_SlaveReceiveInfo.u32FreeLength = I2C_SLAVE_RECEIVE_BUFFER_LENGTH;</div>
<div class="line"></div>
<div class="line">    <span class="comment">/* initialize call back function */</span></div>
<div class="line">    <a class="code" href="group__i2c__api__list.html#ga2cec969582ad739bd968f25464c3cba9" title="set call back function for I2C0 module. ">I2C0_SetCallBack</a>(I2C_CallBack);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="comment">/*****************************************************************************/</span></div>
<div class="line"><span class="keywordtype">void</span> I2C_MasterIntProcessing( <span class="keywordtype">void</span> )</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span>( <a class="code" href="group__i2c__api__list.html#ga5c8c3da4f808194012699aee7aa2b7e6" title="check if is Tx mode. ">I2C_IsTxMode</a>(I2C0) )</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span>( sI2C_MasterSendInfo.u32Pointer &lt; sI2C_MasterSendInfo.u32Length )</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="group__i2c__api__list.html#ga08f5550932c9cb2ff48bf1bffbf5ab21" title="write data to data register. ">I2C_WriteDataReg</a>(I2C0,sI2C_MasterSendInfo.u8SendBuff[sI2C_MasterSendInfo.u32Pointer++]);</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="group__i2c__api__list.html#gadd641c2c3667fd2ae66e87c86927dba4" title="send out stop signals. ">I2C_Stop</a>(I2C0);<span class="comment">//I2C0-&gt;C1 &amp;= ~I2C_C1_MST_MASK;</span></div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">    {</div>
<div class="line">        <span class="comment">/* Master receive data from slave */</span></div>
<div class="line">        </div>
<div class="line">        </div>
<div class="line">        <span class="keywordflow">if</span>( sI2C_MasterReceiveInfo.u32Pointer &lt; ( sI2C_MasterReceiveInfo.u32Length -1) )</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="group__i2c__api__list.html#ga3cdfb22156cccf5083f64c179f636edb" title="send out ACK. ">I2C_SendAck</a>(I2C0);</div>
<div class="line">            sI2C_MasterReceiveInfo.u8ReceiveBuff[sI2C_MasterReceiveInfo.u32Pointer++] =</div>
<div class="line">                    <a class="code" href="group__i2c__api__list.html#ga93d39e33b4994bb2223a8b437ba5452e" title="read data from data register. ">I2C_ReadDataReg</a>(I2C0);  </div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span>( sI2C_MasterReceiveInfo.u32Pointer == (sI2C_MasterReceiveInfo.u32Length -1) )</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="group__i2c__api__list.html#ga216cd0fe2db56c9c3bd72a6f49fd1f01" title="send out NACK. ">I2C_SendNack</a>(I2C0);</div>
<div class="line">            sI2C_MasterReceiveInfo.u8ReceiveBuff[sI2C_MasterReceiveInfo.u32Pointer++] =</div>
<div class="line">                    <a class="code" href="group__i2c__api__list.html#ga93d39e33b4994bb2223a8b437ba5452e" title="read data from data register. ">I2C_ReadDataReg</a>(I2C0);  </div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="group__i2c__api__list.html#gadd641c2c3667fd2ae66e87c86927dba4" title="send out stop signals. ">I2C_Stop</a>(I2C0);</div>
<div class="line">            <a class="code" href="group__i2c__api__list.html#ga93d39e33b4994bb2223a8b437ba5452e" title="read data from data register. ">I2C_ReadDataReg</a>(I2C0); </div>
<div class="line">        }</div>
<div class="line">         </div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/*****************************************************************************/</span></div>
<div class="line"><span class="keywordtype">void</span> I2C_SlaveIntProcessing( <span class="keywordtype">void</span> )</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span>( <a class="code" href="group__i2c__api__list.html#gacda9405d30b4c0e3490ae87009759abe" title="get I2C status. ">I2C_GetStatus</a>(I2C0) &amp; I2C_S_IAAS_MASK )</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="group__i2c__api__list.html#ga3cdfb22156cccf5083f64c179f636edb" title="send out ACK. ">I2C_SendAck</a>(I2C0);</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span>( <a class="code" href="group__i2c__api__list.html#gacda9405d30b4c0e3490ae87009759abe" title="get I2C status. ">I2C_GetStatus</a>(I2C0)&amp; I2C_S_SRW_MASK )</div>
<div class="line">        {</div>
<div class="line">            <span class="comment">// slave send data</span></div>
<div class="line">            <a class="code" href="group__i2c__api__list.html#gac622a653b38d9a2247c7a3c255d7190c" title="enable I2C to transmit data. ">I2C_TxEnable</a>(I2C0);</div>
<div class="line">            sI2C_SlaveSendInfo.u32Pointer = 0;</div>
<div class="line">            <a class="code" href="group__i2c__api__list.html#ga08f5550932c9cb2ff48bf1bffbf5ab21" title="write data to data register. ">I2C_WriteDataReg</a>(I2C0,sI2C_SlaveSendInfo.u8SendBuff[sI2C_SlaveSendInfo.u32Pointer++]);</div>
<div class="line">           </div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="group__i2c__api__list.html#ga3beaf3464ee811af6538e7aaabec37d4" title="enable I2C to receive data. ">I2C_RxEnable</a>(I2C0);</div>
<div class="line">            <a class="code" href="group__i2c__api__list.html#ga93d39e33b4994bb2223a8b437ba5452e" title="read data from data register. ">I2C_ReadDataReg</a>(I2C0);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span>( I2C0-&gt;S &amp; I2C_S_SRW_MASK )</div>
<div class="line">        {</div>
<div class="line">            <span class="comment">// if require ACK from master</span></div>
<div class="line">            <span class="keywordflow">if</span>( <a class="code" href="group__i2c__api__list.html#gad47512bf30ef05bab1a6eaf1dc8773e9" title="check I2C receive ack or nack. ">I2C_IsReceivedAck</a>(I2C0))</div>
<div class="line">            {</div>
<div class="line">                <span class="comment">// no receive the ACK</span></div>
<div class="line">                <a class="code" href="group__i2c__api__list.html#ga3beaf3464ee811af6538e7aaabec37d4" title="enable I2C to receive data. ">I2C_RxEnable</a>(I2C0);</div>
<div class="line">                <a class="code" href="group__i2c__api__list.html#ga93d39e33b4994bb2223a8b437ba5452e" title="read data from data register. ">I2C_ReadDataReg</a>(I2C0);</div>
<div class="line">                <span class="comment">// switch to RX</span></div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line">                <span class="keywordflow">if</span>( sI2C_SlaveSendInfo.u32Pointer &lt; sI2C_SlaveSendInfo.u32Length )</div>
<div class="line">                {</div>
<div class="line">                    <a class="code" href="group__i2c__api__list.html#ga08f5550932c9cb2ff48bf1bffbf5ab21" title="write data to data register. ">I2C_WriteDataReg</a>(I2C0,sI2C_SlaveSendInfo.u8SendBuff[sI2C_SlaveSendInfo.u32Pointer++]);</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">else</span></div>
<div class="line">                {</div>
<div class="line">                    <span class="comment">/* here do nothing, clock  streching</span></div>
<div class="line"><span class="comment">                       or send a 0xff to master.</span></div>
<div class="line"><span class="comment">                                    */</span></div>
<div class="line">                    <a class="code" href="group__i2c__api__list.html#ga08f5550932c9cb2ff48bf1bffbf5ab21" title="write data to data register. ">I2C_WriteDataReg</a>( I2C0, 0xff );</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">        {</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">if</span>( sI2C_SlaveReceiveInfo.u32FreeLength != 0 )</div>
<div class="line">            {</div>
<div class="line">                sI2C_SlaveReceiveInfo.u8ReceiveBuff[sI2C_SlaveReceiveInfo.u32Tail++] = <a class="code" href="group__i2c__api__list.html#ga93d39e33b4994bb2223a8b437ba5452e" title="read data from data register. ">I2C_ReadDataReg</a>(I2C0);</div>
<div class="line">                <span class="keywordflow">if</span>( sI2C_SlaveReceiveInfo.u32Tail &gt;= I2C_SLAVE_RECEIVE_BUFFER_LENGTH )</div>
<div class="line">                {</div>
<div class="line">                    sI2C_SlaveReceiveInfo.u32Tail = 0;</div>
<div class="line">                }</div>
<div class="line">                sI2C_SlaveReceiveInfo.u32FreeLength --;</div>
<div class="line"></div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line">                <span class="comment">/* received buff is full,discard the received data */</span></div>
<div class="line">                <a class="code" href="group__i2c__api__list.html#ga93d39e33b4994bb2223a8b437ba5452e" title="read data from data register. ">I2C_ReadDataReg</a>(I2C0);</div>
<div class="line">            }</div>
<div class="line">       }</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/*****************************************************************************/</span></div>
<div class="line">uint32_t I2C_SlaveReceive( uint8_t *pRdBuff )</div>
<div class="line">{</div>
<div class="line">    uint32_t i;</div>
<div class="line"></div>
<div class="line">    <a class="code" href="group__i2c__api__list.html#gaea8eb06eee5b8458ffef249d6d0c9a09" title="disable IICIF interrupt. ">I2C_IntDisable</a>(I2C0);</div>
<div class="line">    i = 0;</div>
<div class="line">    <span class="keywordflow">while</span>( sI2C_SlaveReceiveInfo.u32FreeLength &lt; I2C_SLAVE_RECEIVE_BUFFER_LENGTH )</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span>( sI2C_SlaveReceiveInfo.u32Head != sI2C_SlaveReceiveInfo.u32Tail )</div>
<div class="line">        {</div>
<div class="line">            pRdBuff[i++] = sI2C_SlaveReceiveInfo.u8ReceiveBuff[sI2C_SlaveReceiveInfo.u32Head++];</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">if</span>( sI2C_SlaveReceiveInfo.u32Head &gt;= I2C_SLAVE_RECEIVE_BUFFER_LENGTH )</div>
<div class="line">            {</div>
<div class="line">                sI2C_SlaveReceiveInfo.u32Head = 0;</div>
<div class="line">            }</div>
<div class="line">            </div>
<div class="line">            sI2C_SlaveReceiveInfo.u32FreeLength ++;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <a class="code" href="group__i2c__api__list.html#ga70b6db691cf28f65369a2ce5858be345" title="enable IICIF interrupt. ">I2C_IntEnable</a>(I2C0);</div>
<div class="line">    <span class="keywordflow">return</span> i;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/*****************************************************************************/</span></div>
<div class="line">uint8_t I2C_SlaveSend( uint8_t *pWrBuff, uint32_t uiLength )</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span>( uiLength &gt; I2C_SLAVE_SEND_BUFFER_LENGTH )</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">return</span> FALSE;</div>
<div class="line">    }</div>
<div class="line">    <a class="code" href="group__i2c__api__list.html#gaea8eb06eee5b8458ffef249d6d0c9a09" title="disable IICIF interrupt. ">I2C_IntDisable</a>(I2C0);</div>
<div class="line">    sI2C_SlaveSendInfo.u32Length = uiLength;</div>
<div class="line">    memcpy((<span class="keywordtype">void</span> *)&amp;sI2C_SlaveSendInfo.u8SendBuff[0],(<span class="keywordtype">void</span> *)pWrBuff,uiLength);</div>
<div class="line">    <a class="code" href="group__i2c__api__list.html#ga70b6db691cf28f65369a2ce5858be345" title="enable IICIF interrupt. ">I2C_IntEnable</a>(I2C0);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> TRUE;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/*****************************************************************************/</span></div>
<div class="line">uint32_t I2C0_MasterCheckRead( uint8_t *pRdBuff )</div>
<div class="line">{</div>
<div class="line">    uint32_t uiPointer;</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">if</span>( sI2C0_MasterReceiveInfo.u32Pointer !=0 )</div>
<div class="line">    {</div>
<div class="line">        memcpy((<span class="keywordtype">void</span> *) pRdBuff,</div>
<div class="line">        (<span class="keywordtype">void</span> *)&amp;sI2C0_MasterReceiveInfo.u8ReceiveBuff[0],</div>
<div class="line">        sI2C0_MasterReceiveInfo.u32Pointer );</div>
<div class="line">        uiPointer = sI2C0_MasterReceiveInfo.u32Pointer;</div>
<div class="line">        sI2C0_MasterReceiveInfo.u32Pointer = 0;</div>
<div class="line">        <span class="keywordflow">return</span> uiPointer;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">    {</div>
<div class="line">        <span class="comment">/* don&#39;t receive all required data */</span></div>
<div class="line">        <span class="keywordflow">return</span> 0;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/*****************************************************************************/</span></div>
<div class="line">uint8_t I2C_MasterRead( uint16_t u16Address,uint32_t u32Length )</div>
<div class="line">{</div>
<div class="line">    </div>
<div class="line">    uint8_t u8Status;</div>
<div class="line">    </div>
<div class="line">   <a class="code" href="group__i2c__api__list.html#gaea8eb06eee5b8458ffef249d6d0c9a09" title="disable IICIF interrupt. ">I2C_IntDisable</a>(I2C0);</div>
<div class="line">   </div>
<div class="line">   <span class="comment">/* send out start on bus */</span></div>
<div class="line">   u8Status = <a class="code" href="group__i2c__api__list.html#ga0e724b1af66b4379ac71a359c3e18239" title="send out start signals. ">I2C_Start</a>(I2C0);</div>
<div class="line"></div>
<div class="line">   <span class="keywordflow">if</span>( u8Status == <a class="code" href="group__i2c__error__state__list.html#ga82a7321c8e5e9e5d5b70bd5477201ab9">I2C_ERROR_NULL</a> )</div>
<div class="line">   {</div>
<div class="line">       u8Status = <a class="code" href="group__i2c__api__list.html#gaec4d72bbea9d3a23f079c0f794665885" title="write a byte to I2C module. ">I2C_WriteOneByte</a>(I2C0,(uint8)((u16Address&lt;&lt;1)|0x01));</div>
<div class="line">       <span class="keywordflow">if</span>( u8Status == <a class="code" href="group__i2c__error__state__list.html#ga82a7321c8e5e9e5d5b70bd5477201ab9">I2C_ERROR_NULL</a> )</div>
<div class="line">       {</div>
<div class="line">           </div>
<div class="line">            <span class="comment">/* change to Rx mode */</span></div>
<div class="line">            sI2C_MasterReceiveInfo.u32Length = u32Length;</div>
<div class="line">            sI2C_MasterReceiveInfo.u32Pointer = 0;</div>
<div class="line">            <a class="code" href="group__i2c__api__list.html#ga3cdfb22156cccf5083f64c179f636edb" title="send out ACK. ">I2C_SendAck</a>(I2C0);</div>
<div class="line">            <a class="code" href="group__i2c__api__list.html#ga3beaf3464ee811af6538e7aaabec37d4" title="enable I2C to receive data. ">I2C_RxEnable</a>(I2C0);</div>
<div class="line">            <a class="code" href="group__i2c__api__list.html#ga93d39e33b4994bb2223a8b437ba5452e" title="read data from data register. ">I2C_ReadDataReg</a>(I2C0);</div>
<div class="line">       }</div>
<div class="line">   }</div>
<div class="line"></div>
<div class="line">   <a class="code" href="group__i2c__api__list.html#ga70b6db691cf28f65369a2ce5858be345" title="enable IICIF interrupt. ">I2C_IntEnable</a>(I2C0);</div>
<div class="line">   </div>
<div class="line">   <span class="keywordflow">return</span> u8Status;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/*****************************************************************************/</span></div>
<div class="line">uint8_t I2C_MasterSend( uint16_t Address,uint8_t *pWrBuff, uint32_t u32Length )</div>
<div class="line">{</div>
<div class="line">    uint8_t u8Status;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span>( <a class="code" href="group__i2c__api__list.html#ga80891bf40f774d61bacafae3821416e8" title="check I2C if busy. ">I2C_IsBusy</a>(I2C0) )</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">return</span> <a class="code" href="group__i2c__error__state__list.html#ga68696531d782d89bac6afa5bde973844">I2C_ERROR_BUS_BUSY</a>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <a class="code" href="group__i2c__api__list.html#gaea8eb06eee5b8458ffef249d6d0c9a09" title="disable IICIF interrupt. ">I2C_IntDisable</a>(I2C0);</div>
<div class="line">    </div>
<div class="line">    <span class="comment">/* send out start on bus */</span></div>
<div class="line">    u8Status = <a class="code" href="group__i2c__api__list.html#ga0e724b1af66b4379ac71a359c3e18239" title="send out start signals. ">I2C_Start</a>(I2C0);</div>
<div class="line">    <a class="code" href="group__i2c__api__list.html#gac622a653b38d9a2247c7a3c255d7190c" title="enable I2C to transmit data. ">I2C_TxEnable</a>(I2C0);</div>
<div class="line">    <span class="keywordflow">if</span>( u8Status == <a class="code" href="group__i2c__error__state__list.html#ga82a7321c8e5e9e5d5b70bd5477201ab9">I2C_ERROR_NULL</a> )</div>
<div class="line">    {</div>
<div class="line">        u8Status = <a class="code" href="group__i2c__api__list.html#gaec4d72bbea9d3a23f079c0f794665885" title="write a byte to I2C module. ">I2C_WriteOneByte</a>(I2C0,(uint8)((Address&lt;&lt;1)&amp;0xfe));</div>
<div class="line">        <span class="keywordflow">if</span>( u8Status == <a class="code" href="group__i2c__error__state__list.html#ga82a7321c8e5e9e5d5b70bd5477201ab9">I2C_ERROR_NULL</a> )</div>
<div class="line">        {</div>
<div class="line">            memcpy((<span class="keywordtype">void</span> *)&amp;sI2C_MasterSendInfo.u8SendBuff[0],</div>
<div class="line">                    (<span class="keywordtype">void</span> *)pWrBuff,u32Length); </div>
<div class="line">   </div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    sI2C_MasterSendInfo.u32Pointer = 0;</div>
<div class="line">    sI2C_MasterSendInfo.u32Length = u32Length;</div>
<div class="line">    <a class="code" href="group__i2c__api__list.html#ga70b6db691cf28f65369a2ce5858be345" title="enable IICIF interrupt. ">I2C_IntEnable</a>(I2C0);</div>
<div class="line">    </div>
<div class="line">    <a class="code" href="group__i2c__api__list.html#ga08f5550932c9cb2ff48bf1bffbf5ab21" title="write data to data register. ">I2C_WriteDataReg</a>(I2C0, sI2C_MasterSendInfo.u8SendBuff[sI2C_MasterSendInfo.u32Pointer++] );</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> u8Status;</div>
<div class="line"></div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"></div>
</div><!-- fragment --> </dd></dl>
<dl class="section user"><dt>i2c_app.h:</dt><dd><div class="fragment"><div class="line"><span class="comment">/******************************************************************************</span></div>
<div class="line"><span class="comment">*</span></div>
<div class="line"><span class="comment">* Freescale Semiconductor Inc.</span></div>
<div class="line"><span class="comment">* (c) Copyright 2011-2012 Freescale Semiconductor, Inc.</span></div>
<div class="line"><span class="comment">* ALL RIGHTS RESERVED.</span></div>
<div class="line"><span class="comment">*</span></div>
<div class="line"><span class="comment">***************************************************************************</span></div>
<div class="line"><span class="comment">*</span></div>
<div class="line"><span class="comment">* THIS SOFTWARE IS PROVIDED BY FREESCALE &quot;AS IS&quot; AND ANY EXPRESSED OR</span></div>
<div class="line"><span class="comment">* IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES</span></div>
<div class="line"><span class="comment">* OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.</span></div>
<div class="line"><span class="comment">* IN NO EVENT SHALL FREESCALE OR ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT,</span></div>
<div class="line"><span class="comment">* INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES</span></div>
<div class="line"><span class="comment">* (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR</span></div>
<div class="line"><span class="comment">* SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)</span></div>
<div class="line"><span class="comment">* HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,</span></div>
<div class="line"><span class="comment">* STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING</span></div>
<div class="line"><span class="comment">* IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF</span></div>
<div class="line"><span class="comment">* THE POSSIBILITY OF SUCH DAMAGE.</span></div>
<div class="line"><span class="comment">*</span></div>
<div class="line"><span class="comment">***************************************************************************/</span></div>
<div class="line"><span class="preprocessor">#ifndef _I2C_APP_H__</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define _I2C_APP_H__</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="comment">/******************************************************************************</span></div>
<div class="line"><span class="comment">* Global variables</span></div>
<div class="line"><span class="comment">******************************************************************************/</span></div>
<div class="line"></div>
<div class="line"><span class="comment">/******************************************************************************</span></div>
<div class="line"><span class="comment">* Constants and macros</span></div>
<div class="line"><span class="comment">******************************************************************************/</span></div>
<div class="line"></div>
<div class="line"><span class="comment">/******************************************************************************</span></div>
<div class="line"><span class="comment">* Local types</span></div>
<div class="line"><span class="comment">******************************************************************************/</span></div>
<div class="line"></div>
<div class="line"><span class="comment">/******************************************************************************</span></div>
<div class="line"><span class="comment">* Local function prototypes</span></div>
<div class="line"><span class="comment">******************************************************************************/</span></div>
<div class="line"></div>
<div class="line"><span class="comment">/******************************************************************************</span></div>
<div class="line"><span class="comment">* Local variables</span></div>
<div class="line"><span class="comment">******************************************************************************/</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#define I2C_MASTER_SEND_BUFFER_LENGTH           64</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define I2C_MASTER_RECEIVE_BUFFER_LENGTH        64</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define I2C_SLAVE_SEND_BUFFER_LENGTH            64</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define I2C_SLAVE_RECEIVE_BUFFER_LENGTH         65</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span></div>
<div class="line">{</div>
<div class="line">    uint32_t u32Pointer;</div>
<div class="line">    uint32_t u32Length;</div>
<div class="line">    uint8_t u8SendBuff[I2C_MASTER_SEND_BUFFER_LENGTH];</div>
<div class="line">}<a class="code" href="struct_i2_c___master_send_type.html" title="I2C master send data type. ">I2C_MasterSendType</a>;</div>
<div class="line"></div>
<div class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span></div>
<div class="line">{</div>
<div class="line">    uint32_t u32Pointer;</div>
<div class="line">    uint32_t u32Length;</div>
<div class="line">    uint8_t u8ReceiveBuff[I2C_MASTER_RECEIVE_BUFFER_LENGTH];</div>
<div class="line">}<a class="code" href="struct_i2_c___master_receive_type.html" title="I2C master receive data type. ">I2C_MasterReceiveType</a>;</div>
<div class="line"></div>
<div class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span></div>
<div class="line">{</div>
<div class="line">    uint32_t u32Head;</div>
<div class="line">    uint32_t u32Tail;</div>
<div class="line">    uint32_t u32FreeLength;</div>
<div class="line">    uint8_t u8ReceiveBuff[I2C_SLAVE_RECEIVE_BUFFER_LENGTH];</div>
<div class="line">}<a class="code" href="struct_i2_c___slave_receive_type.html" title="I2C slave receive data type. ">I2C_SlaveReceiveType</a>;</div>
<div class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span></div>
<div class="line">{</div>
<div class="line">    uint32_t u32Pointer;</div>
<div class="line">    uint32_t u32Length;</div>
<div class="line">    uint8_t u8SendBuff[I2C_SLAVE_SEND_BUFFER_LENGTH];</div>
<div class="line">}<a class="code" href="struct_i2_c___slave_send_type.html" title="I2C slave send data type. ">I2C_SlaveSendType</a>;</div>
<div class="line"></div>
<div class="line"><span class="comment">/******************************************************************************</span></div>
<div class="line"><span class="comment">* Global functions</span></div>
<div class="line"><span class="comment">******************************************************************************/</span></div>
<div class="line"><span class="keywordtype">void</span> I2C_CallBack( <span class="keywordtype">void</span> );</div>
<div class="line"><span class="keywordtype">void</span> I2C_InitGlobalVariable( <span class="keywordtype">void</span> );</div>
<div class="line"><span class="keywordtype">void</span> I2C_MasterIntProcessing( <span class="keywordtype">void</span> );</div>
<div class="line"><span class="keywordtype">void</span> I2C_SlaveIntProcessing( <span class="keywordtype">void</span> );</div>
<div class="line">uint32_t I2C_SlaveReceive( uint8_t *pRdBuff );</div>
<div class="line">uint8_t I2C_SlaveSend( uint8_t *pWrBuff, uint32_t uiLength );</div>
<div class="line">uint32_t I2C_MasterCheckRead( uint8_t *pRdBuff );</div>
<div class="line">uint8_t I2C_MasterRead( uint16_t u16Address,uint32_t u32Length );</div>
<div class="line">uint8_t I2C_MasterSend( uint16_t Address,uint8_t *pWrBuff, uint32_t u32Length );</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#endif //</span></div>
<div class="line"><span class="preprocessor"></span></div>
</div><!-- fragment --> </dd></dl>
<dl class="section user"><dt>ke04_config.h:</dt><dd><div class="fragment"><div class="line"><span class="comment">/******************************************************************************</span></div>
<div class="line"><span class="comment">*</span></div>
<div class="line"><span class="comment">* Freescale Semiconductor Inc.</span></div>
<div class="line"><span class="comment">* (c) Copyright 2013 Freescale Semiconductor, Inc.</span></div>
<div class="line"><span class="comment">* ALL RIGHTS RESERVED.</span></div>
<div class="line"><span class="comment">*</span></div>
<div class="line"><span class="comment">***************************************************************************</span></div>
<div class="line"><span class="comment">*</span></div>
<div class="line"><span class="comment">* THIS SOFTWARE IS PROVIDED BY FREESCALE &quot;AS IS&quot; AND ANY EXPRESSED OR</span></div>
<div class="line"><span class="comment">* IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES</span></div>
<div class="line"><span class="comment">* OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.</span></div>
<div class="line"><span class="comment">* IN NO EVENT SHALL FREESCALE OR ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT,</span></div>
<div class="line"><span class="comment">* INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES</span></div>
<div class="line"><span class="comment">* (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR</span></div>
<div class="line"><span class="comment">* SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)</span></div>
<div class="line"><span class="comment">* HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,</span></div>
<div class="line"><span class="comment">* STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING</span></div>
<div class="line"><span class="comment">* IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF</span></div>
<div class="line"><span class="comment">* THE POSSIBILITY OF SUCH DAMAGE.</span></div>
<div class="line"><span class="comment">*</span></div>
<div class="line"><span class="comment">***************************************************************************/</span></div>
<div class="line"><span class="preprocessor">#ifndef _KExx_CONFIG_H_</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define _KExx_CONFIG_H_</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="comment">/******************************************************************************</span></div>
<div class="line"><span class="comment">* Includes</span></div>
<div class="line"><span class="comment">******************************************************************************/</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdint.h&gt;</span></div>
<div class="line"><span class="comment">/******************************************************************************</span></div>
<div class="line"><span class="comment">* Constants</span></div>
<div class="line"><span class="comment">******************************************************************************/</span></div>
<div class="line"></div>
<div class="line"><span class="comment">/******************************************************************************</span></div>
<div class="line"><span class="comment">* Macros</span></div>
<div class="line"><span class="comment">******************************************************************************/</span></div>
<div class="line"></div>
<div class="line"><span class="comment">//#define     TEST_ON_EVB           /*!&lt; if running on freedom board, this line must be commented */</span></div>
<div class="line"><span class="preprocessor">#define TRIM_IRC                    </span></div>
<div class="line"><span class="preprocessor">//#define SPI0_PINREMAP               </span></div>
<div class="line"><span class="preprocessor">#define DISABLE_NMI                 </span></div>
<div class="line"><span class="preprocessor">#define FTMRH           FTMRE</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTM1            NULL</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define UART1           NULL</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define UART2           NULL</span></div>
<div class="line"><span class="preprocessor"></span><span class="comment">/* FCLKDIV Bit Fields */</span>                                                                                  </div>
<div class="line"><span class="preprocessor">#define FTMRH_FCLKDIV_FDIV_MASK         FTMRE_FCLKDIV_FDIV_MASK                                           </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FCLKDIV_FDIV_SHIFT        FTMRE_FCLKDIV_FDIV_SHIFT                                          </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FCLKDIV_FDIV(x)           FTMRE_FCLKDIV_FDIV(x)                                             </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FCLKDIV_FDIVLCK_MASK      FTMRE_FCLKDIV_FDIVLCK_MASK                                        </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FCLKDIV_FDIVLCK_SHIFT     FTMRE_FCLKDIV_FDIVLCK_SHIFT                                       </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FCLKDIV_FDIVLD_MASK       FTMRE_FCLKDIV_FDIVLD_MASK                                         </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FCLKDIV_FDIVLD_SHIFT      FTMRE_FCLKDIV_FDIVLD_SHIFT                                        </span></div>
<div class="line"><span class="preprocessor"></span><span class="comment">/* FSEC Bit Fields */</span>                                                                         </div>
<div class="line"><span class="preprocessor">#define FTMRH_FSEC_SEC_MASK             FTMRE_FSEC_SEC_MASK                                               </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FSEC_SEC_SHIFT            FTMRE_FSEC_SEC_SHIFT                                              </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FSEC_SEC(x)               FTMRE_FSEC_SEC(x)                                                 </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FSEC_KEYEN_MASK           FTMRE_FSEC_KEYEN_MASK                                             </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FSEC_KEYEN_SHIFT          FTMRE_FSEC_KEYEN_SHIFT                                            </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FSEC_KEYEN(x)             FTMRE_FSEC_KEYEN(x)                                               </span></div>
<div class="line"><span class="preprocessor"></span><span class="comment">/* FCCOBIX Bit Fields */</span>                                                                         </div>
<div class="line"><span class="preprocessor">#define FTMRH_FCCOBIX_CCOBIX_MASK       FTMRE_FCCOBIX_CCOBIX_MASK                                         </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FCCOBIX_CCOBIX_SHIFT      FTMRE_FCCOBIX_CCOBIX_SHIFT                                        </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FCCOBIX_CCOBIX(x)         FTMRE_FCCOBIX_CCOBIX(x)                                           </span></div>
<div class="line"><span class="preprocessor"></span><span class="comment">/* FCNFG Bit Fields */</span>                                                                      </div>
<div class="line"><span class="preprocessor">#define FTMRH_FCNFG_FSFD_MASK           FTMRE_FCNFG_FSFD_MASK                                             </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FCNFG_FSFD_SHIFT          FTMRE_FCNFG_FSFD_SHIFT                                            </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FCNFG_FDFD_MASK           FTMRE_FCNFG_FDFD_MASK                                             </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FCNFG_FDFD_SHIFT          FTMRE_FCNFG_FDFD_SHIFT                                            </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FCNFG_IGNSF_MASK          FTMRE_FCNFG_IGNSF_MASK                                            </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FCNFG_IGNSF_SHIFT         FTMRE_FCNFG_IGNSF_SHIFT                                           </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FCNFG_CCIE_MASK           FTMRE_FCNFG_CCIE_MASK                                             </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FCNFG_CCIE_SHIFT          FTMRE_FCNFG_CCIE_SHIFT                                            </span></div>
<div class="line"><span class="preprocessor"></span><span class="comment">/* FERCNFG Bit Fields */</span>                                                                    </div>
<div class="line"><span class="preprocessor">#define FTMRH_FERCNFG_SFDIE_MASK        FTMRE_FERCNFG_SFDIE_MASK                                          </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FERCNFG_SFDIE_SHIFT       FTMRE_FERCNFG_SFDIE_SHIFT                                         </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FERCNFG_DFDIE_MASK        FTMRE_FERCNFG_DFDIE_MASK                                          </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FERCNFG_DFDIE_SHIFT       FTMRE_FERCNFG_DFDIE_SHIFT                                         </span></div>
<div class="line"><span class="preprocessor"></span><span class="comment">/* FSTAT Bit Fields */</span>                                                                        </div>
<div class="line"><span class="preprocessor">#define FTMRH_FSTAT_MGSTAT_MASK         FTMRE_FSTAT_MGSTAT_MASK                                           </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FSTAT_MGSTAT_SHIFT        FTMRE_FSTAT_MGSTAT_SHIFT                                          </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FSTAT_MGSTAT(x)           FTMRE_FSTAT_MGSTAT(x)                                             </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FSTAT_MGBUSY_MASK         FTMRE_FSTAT_MGBUSY_MASK                                           </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FSTAT_MGBUSY_SHIFT        FTMRE_FSTAT_MGBUSY_SHIFT                                          </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FSTAT_FPVIOL_MASK         FTMRE_FSTAT_FPVIOL_MASK                                           </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FSTAT_FPVIOL_SHIFT        FTMRE_FSTAT_FPVIOL_SHIFT                                          </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FSTAT_ACCERR_MASK         FTMRE_FSTAT_ACCERR_MASK                                           </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FSTAT_ACCERR_SHIFT        FTMRE_FSTAT_ACCERR_SHIFT                                          </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FSTAT_CCIF_MASK           FTMRE_FSTAT_CCIF_MASK                                             </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FSTAT_CCIF_SHIFT          FTMRE_FSTAT_CCIF_SHIFT                                            </span></div>
<div class="line"><span class="preprocessor"></span><span class="comment">/* FERSTAT Bit Fields */</span>                                                                     </div>
<div class="line"><span class="preprocessor">#define FTMRH_FERSTAT_SFDIF_MASK        FTMRE_FERSTAT_SFDIF_MASK                                          </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FERSTAT_SFDIF_SHIFT       FTMRE_FERSTAT_SFDIF_SHIFT                                         </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FERSTAT_DFDIF_MASK        FTMRE_FERSTAT_DFDIF_MASK                                          </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FERSTAT_DFDIF_SHIFT       FTMRE_FERSTAT_DFDIF_SHIFT                                         </span></div>
<div class="line"><span class="preprocessor"></span><span class="comment">/* FPROT Bit Fields */</span>                                                                   </div>
<div class="line"><span class="preprocessor">#define FTMRH_FPROT_FPLS_MASK           FTMRE_FPROT_FPLS_MASK                                             </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FPROT_FPLS_SHIFT          FTMRE_FPROT_FPLS_SHIFT                                            </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FPROT_FPLS(x)             FTMRE_FPROT_FPLS(x)                                               </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FPROT_FPLDIS_MASK         FTMRE_FPROT_FPLDIS_MASK                                           </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FPROT_FPLDIS_SHIFT        FTMRE_FPROT_FPLDIS_SHIFT                                          </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FPROT_FPHS_MASK           FTMRE_FPROT_FPHS_MASK                                             </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FPROT_FPHS_SHIFT          FTMRE_FPROT_FPHS_SHIFT                                            </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FPROT_FPHS(x)             FTMRE_FPROT_FPHS(x)                                               </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FPROT_FPHDIS_MASK         FTMRE_FPROT_FPHDIS_MASK                                           </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FPROT_FPHDIS_SHIFT        FTMRE_FPROT_FPHDIS_SHIFT                                          </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FPROT_FPOPEN_MASK         FTMRE_FPROT_FPOPEN_MASK                                           </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FPROT_FPOPEN_SHIFT        FTMRE_FPROT_FPOPEN_SHIFT                                          </span></div>
<div class="line"><span class="preprocessor"></span><span class="comment">/* EEPROT Bit Fields */</span>                                                                    </div>
<div class="line"><span class="preprocessor">#define FTMRH_EEPROT_DPS_MASK           FTMRE_EEPROT_DPS_MASK                                             </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_EEPROT_DPS_SHIFT          FTMRE_EEPROT_DPS_SHIFT                                            </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_EEPROT_DPS(x)             FTMRE_EEPROT_DPS(x)                                               </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_EEPROT_DPOPEN_MASK        FTMRE_EEPROT_DPOPEN_MASK                                          </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_EEPROT_DPOPEN_SHIFT       FTMRE_EEPROT_DPOPEN_SHIFT                                         </span></div>
<div class="line"><span class="preprocessor"></span><span class="comment">/* FCCOBHI Bit Fields */</span>                                                                        </div>
<div class="line"><span class="preprocessor">#define FTMRH_FCCOBHI_CCOB_MASK         FTMRE_FCCOBHI_CCOB_MASK                                           </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FCCOBHI_CCOB_SHIFT        FTMRE_FCCOBHI_CCOB_SHIFT                                          </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FCCOBHI_CCOB(x)           FTMRE_FCCOBHI_CCOB(x)                                             </span></div>
<div class="line"><span class="preprocessor"></span><span class="comment">/* FCCOBLO Bit Fields */</span>                                                                      </div>
<div class="line"><span class="preprocessor">#define FTMRH_FCCOBLO_CCOB_MASK         FTMRE_FCCOBLO_CCOB_MASK                                           </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FCCOBLO_CCOB_SHIFT        FTMRE_FCCOBLO_CCOB_SHIFT                                          </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FCCOBLO_CCOB(x)           FTMRE_FCCOBLO_CCOB(x)                                             </span></div>
<div class="line"><span class="preprocessor"></span><span class="comment">/* FOPT Bit Fields */</span>                                                                                </div>
<div class="line"><span class="preprocessor">#define FTMRH_FOPT_NV_MASK              FTMRE_FOPT_NV_MASK                                                </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FOPT_NV_SHIFT             FTMRE_FOPT_NV_SHIFT                                               </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FOPT_NV(x)                FTMRE_FOPT_NV(x)                                                  </span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">         </div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="comment">/* NOTE: for RAM version, comment it */</span></div>
<div class="line"><span class="comment">//#define PRINT_SYS_LOG               /*!&lt; this macro prints system log information */</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#if     !defined(BOOT_LOADER)</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #define PRINT_SYS_LOG           </span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="comment">/* define output bus clock */</span></div>
<div class="line"><span class="comment">//#define OUTPUT_BUSCLK               /*!&lt; this macro allows output of bus clock */</span></div>
<div class="line"><span class="preprocessor">#define ICS_TRIM_VALUE  0x54        </span></div>
<div class="line"><span class="preprocessor">#if defined(TEST_ON_EVB)</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">    #define USE_FEE                       </span></div>
<div class="line"><span class="preprocessor">    //#define USE_FEE_OSC                     </span></div>
<div class="line"><span class="preprocessor">    //#define USE_FEI                       </span></div>
<div class="line"><span class="preprocessor">    </span><span class="comment">/* define external crystal frequency */</span><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor"></span>    <span class="comment">//#define EXT_CLK_FREQ_KHZ  32          /* in KHz */</span></div>
<div class="line">    <span class="comment">//#define EXT_CLK_FREQ_KHZ  4000        /* in KHz */</span></div>
<div class="line"><span class="preprocessor">    #define EXT_CLK_FREQ_KHZ    8000        </span><span class="comment">/* in KHz */</span><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor"></span>    <span class="comment">//#define EXT_CLK_FREQ_KHZ  10000       /* in KHz */</span></div>
<div class="line"></div>
<div class="line">    <span class="comment">//#define CRYST_HIGH_GAIN</span></div>
<div class="line">    <span class="comment">//#define XOSC_STOP_ENABLE</span></div>
<div class="line"></div>
<div class="line">    <span class="comment">/* define SCI port # to be used */</span></div>
<div class="line"><span class="preprocessor">    #define TERM_PORT   UART0               </span></div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">    #define USE_FEE                         </span></div>
<div class="line"><span class="preprocessor">    //#define USE_FEE_OSC                   </span></div>
<div class="line"><span class="preprocessor">    //#define USE_FEI                       </span></div>
<div class="line"><span class="preprocessor">    //#define EXT_CLK_FREQ_KHZ  32          </span><span class="comment">/* in KHz */</span><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor"></span>    <span class="comment">//#define EXT_CLK_FREQ_KHZ  4000        /* in KHz */</span></div>
<div class="line"><span class="preprocessor">    #define EXT_CLK_FREQ_KHZ    8000        </span><span class="comment">/* in KHz */</span><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor"></span>    <span class="comment">//#define EXT_CLK_FREQ_KHZ  10000       /* in KHz */</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #define TERM_PORT   UART0               </span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">    <span class="comment">/* define BUS clock in HZ */</span></div>
<div class="line"><span class="preprocessor">    #if defined(USE_FEI)</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">        #define  BUS_CLK_HZ     24000000L </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #elif  (EXT_CLK_FREQ_KHZ == 20000)</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">        #define  BUS_CLK_HZ     20000000L</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #elif  (EXT_CLK_FREQ_KHZ == 10000)</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">        #define  BUS_CLK_HZ     12500000L</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #elif  (EXT_CLK_FREQ_KHZ == 8000)</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">        #define  BUS_CLK_HZ     20000000L</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #elif  (EXT_CLK_FREQ_KHZ == 4000)</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">        #define  BUS_CLK_HZ     20000000L</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #elif  (EXT_CLK_FREQ_KHZ == 32)</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">        #define  BUS_CLK_HZ     20971520L</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #else   </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">        #define  BUS_CLK_HZ     20000000L</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #endif</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">    #define UART_PRINT_BITRATE              115200      </span></div>
<div class="line"><span class="preprocessor">#define LED0_Init()             GPIOA-&gt;PDDR |= (1&lt;&lt;21)    </span></div>
<div class="line"><span class="preprocessor">#define LED0_Toggle()           GPIOA-&gt;PTOR =  (1&lt;&lt;21) </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define LED0_On()               GPIOA-&gt;PCOR =  (1&lt;&lt;21) </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define LED0_Off()              GPIOA-&gt;PSOR =  (1&lt;&lt;21) </span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">#define LED1_Init()             GPIOA-&gt;PDDR |= (1&lt;&lt;20)    </span></div>
<div class="line"><span class="preprocessor">#define LED1_Toggle()           GPIOA-&gt;PTOR =  (1&lt;&lt;20)  </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define LED1_On()               GPIOA-&gt;PCOR =  (1&lt;&lt;20)  </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define LED1_Off()              GPIOA-&gt;PSOR =  (1&lt;&lt;20)  </span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">#define LED2_Init()             GPIOA-&gt;PDDR |= (1&lt;&lt;11)   </span></div>
<div class="line"><span class="preprocessor">#define LED2_Toggle()           GPIOA-&gt;PTOR =  (1&lt;&lt;11)  </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define LED2_On()               GPIOA-&gt;PCOR =  (1&lt;&lt;11)  </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define LED2_Off()              GPIOA-&gt;PSOR =  (1&lt;&lt;11)  </span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">#define RED_Init()              LED0_Init()</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define RED_Set()               LED0_Off()</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define RED_Clear()             LED0_On()</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define RED_Toggle()            LED0_Toggle()</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">#define GREEN_Init()            LED1_Init()</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define GREEN_Set()             LED1_Off()</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define GREEN_Clear()           LED1_On()</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define GREEN_Toggle()          LED1_Toggle()</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">#define BLUE_Init()             LED2_Init()</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define BLUE_Set()              LED2_Off()</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define BLUE_Clear()            LED2_On()</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define BLUE_Toggle()           LED2_Toggle()</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="comment">/******************************************************************************</span></div>
<div class="line"><span class="comment">* Types</span></div>
<div class="line"><span class="comment">******************************************************************************/</span></div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="comment">/******************************************************************************</span></div>
<div class="line"><span class="comment">* Global variables</span></div>
<div class="line"><span class="comment">******************************************************************************/</span></div>
<div class="line"></div>
<div class="line"><span class="comment">/******************************************************************************</span></div>
<div class="line"><span class="comment">* Global functions</span></div>
<div class="line"><span class="comment">******************************************************************************/</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#endif </span><span class="comment">/* _KExx_CONFIG_H_ */</span><span class="preprocessor"></span></div>
</div><!-- fragment --> </dd></dl>
<dl class="section user"><dt>Toolchain support:</dt><dd><table class="doxtable">
<tr>
<th align="center">IAR EWARM 6.7x</th><th align="center">CW MCU 10.x</th><th align="center">KEIL uVision 5.0  </th></tr>
<tr>
<td align="center">x </td><td align="center">x </td><td align="center">x </td></tr>
</table>
</dd></dl>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Mar 7 2014 18:49:53 for Kinetis E Peripheral Drivers by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.4
</small></address>
</body>
</html>
