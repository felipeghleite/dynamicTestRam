<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Kinetis E Peripheral Drivers: OSC Example</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script src="http://www.mathjax.org/mathjax/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="drivers.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="fsl_logo.gif"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Kinetis E Peripheral Drivers
   &#160;<span id="projectnumber">KE_DRV_1.2.1</span>
   </div>
   <div id="projectbrief">Reference Manual</div>
  </td>
 </tr>
 </tbody>
</table>
</div>	
<!-- end header part -->
<!-- Generated by Doxygen 1.8.4 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Introduction</span></a></li>
      <li><a href="pages.html"><span>Pages</span></a></li>
      <li><a href="modules.html"><span>Reference</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">OSC Example<div class="ingroups"><a class="el" href="group__osc__examples.html">OSC Examples</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<p>This example provides how to call OSC driver APIs. </p>
<dl class="section user"><dt>Source code:</dt><dd><div class="fragment"><div class="line"><span class="comment">/*****************************************************************************</span></div>
<div class="line"><span class="comment">*</span></div>
<div class="line"><span class="comment">* Freescale Semiconductor Inc.</span></div>
<div class="line"><span class="comment">* (c) Copyright 2013 Freescale Semiconductor, Inc.</span></div>
<div class="line"><span class="comment">* ALL RIGHTS RESERVED.</span></div>
<div class="line"><span class="comment">*</span></div>
<div class="line"><span class="comment">***************************************************************************</span></div>
<div class="line"><span class="comment">*</span></div>
<div class="line"><span class="comment">* THIS SOFTWARE IS PROVIDED BY FREESCALE &quot;AS IS&quot; AND ANY EXPRESSED OR</span></div>
<div class="line"><span class="comment">* IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES</span></div>
<div class="line"><span class="comment">* OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.</span></div>
<div class="line"><span class="comment">* IN NO EVENT SHALL FREESCALE OR ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT,</span></div>
<div class="line"><span class="comment">* INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES</span></div>
<div class="line"><span class="comment">* (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR</span></div>
<div class="line"><span class="comment">* SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)</span></div>
<div class="line"><span class="comment">* HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,</span></div>
<div class="line"><span class="comment">* STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING</span></div>
<div class="line"><span class="comment">* IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF</span></div>
<div class="line"><span class="comment">* THE POSSIBILITY OF SUCH DAMAGE.</span></div>
<div class="line"><span class="comment">*</span></div>
<div class="line"><span class="comment">***************************************************************************/</span></div>
<div class="line"><span class="preprocessor">#include &quot;common.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;ics.h&quot;</span></div>
<div class="line"></div>
<div class="line"><span class="comment">/******************************************************************************</span></div>
<div class="line"><span class="comment">* Global variables</span></div>
<div class="line"><span class="comment">******************************************************************************/</span></div>
<div class="line"></div>
<div class="line"><span class="comment">/******************************************************************************</span></div>
<div class="line"><span class="comment">* Constants and macros</span></div>
<div class="line"><span class="comment">******************************************************************************/</span></div>
<div class="line"></div>
<div class="line"><span class="comment">/* default value of ICS and OSC registers after reset */</span></div>
<div class="line"><span class="preprocessor">#define ICS_C1_DEFAULT  0x04</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define ICS_C2_DEFAULT  0x20</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define ICS_C3_DEFAULT  0x54</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define ICS_C4_DEFAULT  0x00</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define ICS_S_DEFAULT   0x50</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define OSC_CR_DEFAULT  0</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"></div>
<div class="line"><span class="comment">/******************************************************************************</span></div>
<div class="line"><span class="comment">* Local types</span></div>
<div class="line"><span class="comment">******************************************************************************/</span></div>
<div class="line"></div>
<div class="line"><span class="comment">/******************************************************************************</span></div>
<div class="line"><span class="comment">* Local function prototypes</span></div>
<div class="line"><span class="comment">******************************************************************************/</span></div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="comment">/******************************************************************************</span></div>
<div class="line"><span class="comment">* Local variables</span></div>
<div class="line"><span class="comment">******************************************************************************/</span></div>
<div class="line"></div>
<div class="line"><span class="comment">/******************************************************************************</span></div>
<div class="line"><span class="comment">* Local functions</span></div>
<div class="line"><span class="comment">******************************************************************************/</span></div>
<div class="line"></div>
<div class="line"><span class="comment">/******************************************************************************</span></div>
<div class="line"><span class="comment">* Global functions</span></div>
<div class="line"><span class="comment">******************************************************************************/</span></div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="comment">/*****************************************************************************/</span></div>
<div class="line"><span class="keywordtype">void</span> FEI_to_FEE(<a class="code" href="group__ics__config__type.html#struct_i_c_s___config_type" title="ICS configuration type. ">ICS_ConfigType</a> *pConfig)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">/* enable OSC</span></div>
<div class="line"><span class="comment">     * </span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <a class="code" href="group__osc__api__list.html#gacddf7fea20d81b353dd74b58aa07a7a3" title="initialize XOSC with given parameters: GAIN, RANGE in control structure. ">OSC_Init</a>(&amp;pConfig-&gt;<a class="code" href="group__ics__config__type.html#a3ba204b64f937bdc71767d9334beea72">oscConfig</a>); <span class="comment">/* enable OSC */</span></div>
<div class="line">    </div>
<div class="line">    <span class="comment">/* divide down external clock frequency to be within 31.25K to 39.0625K</span></div>
<div class="line"><span class="comment">     * </span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line"> </div>
<div class="line">    <a class="code" href="group__ics__api__list.html#gaee7a03142594bbfea2a6a8d71b9f857a" title="set clock divider so that the reference clock for FLL/PLL is within spec. ">ICS_SetClkDivider</a>(pConfig-&gt;<a class="code" href="group__ics__config__type.html#a9a397d6975abea4ae001a8a84e565757">u32ClkFreq</a>);</div>
<div class="line"></div>
<div class="line">    <span class="comment">/* change FLL reference clock to external clock */</span></div>
<div class="line">    ICS-&gt;C1 =  ICS-&gt;C1 &amp; ~ICS_C1_IREFS_MASK;</div>
<div class="line">         </div>
<div class="line">    </div>
<div class="line">    <span class="comment">/* wait for the reference clock to be changed to external */</span></div>
<div class="line"><span class="preprocessor">#if defined(IAR)        </span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keyword">asm</span>(</div>
<div class="line">        <span class="stringliteral">&quot;nop \n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;nop \n&quot;</span></div>
<div class="line">    );</div>
<div class="line"><span class="preprocessor">#elif defined(__MWERKS__)</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keyword">asm</span>{</div>
<div class="line">        nop </div>
<div class="line">        nop</div>
<div class="line">};        </div>
<div class="line"><span class="preprocessor">#endif        </span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">while</span>(ICS-&gt;S &amp; ICS_S_IREFST_MASK);</div>
<div class="line">    </div>
<div class="line">    <span class="comment">/* wait for FLL to lock */</span></div>
<div class="line">    <span class="keywordflow">while</span>(!(ICS-&gt;S &amp; ICS_S_LOCK_MASK));</div>
<div class="line">        </div>
<div class="line">    <span class="comment">/* now FLL output clock is FLL reference clock* FLL multiplication factor. </span></div>
<div class="line"><span class="comment">     * See Reference Manual for multiplication factor.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line"><span class="preprocessor">#if defined(CPU_KE02)</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">if</span>(((ICS-&gt;C2 &amp; ICS_C2_BDIV_MASK)&gt;&gt;5) != 1)</div>
<div class="line">    {</div>
<div class="line">        ICS-&gt;C2 = (ICS-&gt;C2 &amp; ~(ICS_C2_BDIV_MASK)) | ICS_C2_BDIV(1);</div>
<div class="line">    }</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor"></span>    ICS-&gt;C2 = (ICS-&gt;C2 &amp; ~(ICS_C2_BDIV_MASK)) | ICS_C2_BDIV(0);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="comment">/* now system/bus clock is the target frequency</span></div>
<div class="line"><span class="comment">     * </span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="comment">/* clear Loss of lock sticky bit */</span></div>
<div class="line">    ICS-&gt;S |= ICS_S_LOLS_MASK;  </div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/*****************************************************************************/</span></div>
<div class="line"><span class="keywordtype">void</span> FEI_to_FBI(<a class="code" href="group__ics__config__type.html#struct_i_c_s___config_type" title="ICS configuration type. ">ICS_ConfigType</a> *pConfig)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">/* change clock source to internal reference clock */</span></div>
<div class="line">    ICS-&gt;C1 = (ICS-&gt;C1 &amp; ~(ICS_C1_CLKS_MASK)) | ICS_C1_CLKS(1);   </div>
<div class="line">    ICS-&gt;C2 = ICS-&gt;C2 &amp; ~(ICS_C2_LP_MASK); </div>
<div class="line">    <span class="comment">/* wait for the reference clock to be changed  */</span></div>
<div class="line"><span class="preprocessor">#if defined(IAR)        </span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keyword">asm</span>(</div>
<div class="line">        <span class="stringliteral">&quot;nop \n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;nop \n&quot;</span></div>
<div class="line">    );</div>
<div class="line"><span class="preprocessor">#elif defined(__MWERKS__)</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keyword">asm</span>{</div>
<div class="line">        nop </div>
<div class="line">        nop</div>
<div class="line">        };        </div>
<div class="line"><span class="preprocessor">#endif        </span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">while</span>(((ICS-&gt;S &amp; ICS_S_CLKST_MASK) &gt;&gt; ICS_S_CLKST_SHIFT) !=1);</div>
<div class="line">            </div>
<div class="line">    <span class="comment">/* now internal reference clock is the system clock</span></div>
<div class="line"><span class="comment">     * </span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line"><span class="preprocessor">#if defined(BUS_CLK_EQU_CORE_DIVIDE_BY_2)||defined(CPU_KE02)        </span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">if</span>(((ICS-&gt;C2 &amp; ICS_C2_BDIV_MASK)&gt;&gt;5) != 1)</div>
<div class="line">    {</div>
<div class="line">        ICS-&gt;C2 = (ICS-&gt;C2 &amp; ~(ICS_C2_BDIV_MASK)) | ICS_C2_BDIV(1);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor"></span>    ICS-&gt;C2 = (ICS-&gt;C2 &amp; ~(ICS_C2_BDIV_MASK));     </div>
<div class="line"><span class="preprocessor">#endif        </span></div>
<div class="line"><span class="preprocessor"></span>    <span class="comment">/* clear Loss of lock sticky bit */</span></div>
<div class="line">    ICS-&gt;S |= ICS_S_LOLS_MASK;  </div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/*****************************************************************************/</span></div>
<div class="line"><span class="keywordtype">void</span> FEI_to_FBE(<a class="code" href="group__ics__config__type.html#struct_i_c_s___config_type" title="ICS configuration type. ">ICS_ConfigType</a> *pConfig)</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="group__osc__api__list.html#gacddf7fea20d81b353dd74b58aa07a7a3" title="initialize XOSC with given parameters: GAIN, RANGE in control structure. ">OSC_Init</a>(&amp;pConfig-&gt;<a class="code" href="group__ics__config__type.html#a3ba204b64f937bdc71767d9334beea72">oscConfig</a>); <span class="comment">/* enable OSC */</span></div>
<div class="line"></div>
<div class="line">    <span class="comment">/* change clock source to external reference clock */</span></div>
<div class="line">    ICS-&gt;C1 =  ICS-&gt;C1 &amp; ~(ICS_C1_IREFS_MASK);</div>
<div class="line">    ICS-&gt;C1 = (ICS-&gt;C1 &amp; ~(ICS_C1_CLKS_MASK)) | ICS_C1_CLKS(2);   </div>
<div class="line">    ICS-&gt;C2 = ICS-&gt;C2 &amp; ~(ICS_C2_LP_MASK); </div>
<div class="line">        </div>
<div class="line">    <span class="comment">/* wait for the reference clock to be changed  */</span></div>
<div class="line"><span class="preprocessor">#if defined(IAR)        </span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keyword">asm</span>(</div>
<div class="line">        <span class="stringliteral">&quot;nop \n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;nop \n&quot;</span></div>
<div class="line">    );</div>
<div class="line"><span class="preprocessor">#elif defined(__MWERKS__)</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keyword">asm</span>{</div>
<div class="line">        nop </div>
<div class="line">        nop</div>
<div class="line">        };        </div>
<div class="line"><span class="preprocessor">#endif        </span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">    <span class="keywordflow">while</span>(((ICS-&gt;S &amp; ICS_S_CLKST_MASK) &gt;&gt; ICS_S_CLKST_SHIFT) !=2);</div>
<div class="line">        <span class="keywordflow">while</span>(ICS-&gt;S &amp; ICS_S_IREFST_MASK);</div>
<div class="line">            </div>
<div class="line">    <span class="comment">/* now external  clock is the system clock</span></div>
<div class="line"><span class="comment">     * </span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line"><span class="preprocessor">#if defined(CPU_KE02)</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">if</span>(((ICS-&gt;C2 &amp; ICS_C2_BDIV_MASK)&gt;&gt;5) != 1)</div>
<div class="line">    {</div>
<div class="line">        ICS-&gt;C2 = (ICS-&gt;C2 &amp; ~(ICS_C2_BDIV_MASK)) | ICS_C2_BDIV(1);</div>
<div class="line">    }</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor"></span>    ICS-&gt;C2 = (ICS-&gt;C2 &amp; ~(ICS_C2_BDIV_MASK)) | ICS_C2_BDIV(0);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="comment">/* now system/bus clock is external clock</span></div>
<div class="line"><span class="comment">     * </span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="comment">/* clear Loss of lock sticky bit */</span></div>
<div class="line">    ICS-&gt;S |= ICS_S_LOLS_MASK;  </div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/*****************************************************************************/</span></div>
<div class="line"><span class="keywordtype">void</span> FEI_to_FBE_OSC(<a class="code" href="group__ics__config__type.html#struct_i_c_s___config_type" title="ICS configuration type. ">ICS_ConfigType</a> *pConfig)</div>
<div class="line">{</div>
<div class="line">    </div>
<div class="line">    <a class="code" href="group__osc__api__list.html#gacddf7fea20d81b353dd74b58aa07a7a3" title="initialize XOSC with given parameters: GAIN, RANGE in control structure. ">OSC_Init</a>(&amp;pConfig-&gt;<a class="code" href="group__ics__config__type.html#a3ba204b64f937bdc71767d9334beea72">oscConfig</a>); <span class="comment">/* enable OSC */</span></div>
<div class="line"></div>
<div class="line">    <span class="comment">/* change RDIV  reference divider to divide reference clock to be with FLL input spec</span></div>
<div class="line"><span class="comment">     * </span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <a class="code" href="group__ics__api__list.html#gaee7a03142594bbfea2a6a8d71b9f857a" title="set clock divider so that the reference clock for FLL/PLL is within spec. ">ICS_SetClkDivider</a>(pConfig-&gt;<a class="code" href="group__ics__config__type.html#a9a397d6975abea4ae001a8a84e565757">u32ClkFreq</a>);</div>
<div class="line">    </div>
<div class="line">    <span class="comment">/* assume external oscillator is 8Mhz or 4MHz</span></div>
<div class="line"><span class="comment">     * </span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="comment">/* change clock source to external reference clock */</span></div>
<div class="line">        ICS-&gt;C1 =  ICS-&gt;C1 &amp; ~(ICS_C1_IREFS_MASK);</div>
<div class="line">    ICS-&gt;C1 = (ICS-&gt;C1 &amp; ~(ICS_C1_CLKS_MASK)) | ICS_C1_CLKS(2);   </div>
<div class="line">    ICS-&gt;C2 = ICS-&gt;C2 &amp; ~(ICS_C2_LP_MASK); </div>
<div class="line">        </div>
<div class="line">    <span class="comment">/* wait for the reference clock to be changed  */</span></div>
<div class="line"><span class="preprocessor">#if defined(IAR)        </span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keyword">asm</span>(</div>
<div class="line">        <span class="stringliteral">&quot;nop \n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;nop \n&quot;</span></div>
<div class="line">    );</div>
<div class="line"><span class="preprocessor">#elif defined(__MWERKS__)</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keyword">asm</span>{</div>
<div class="line">        nop </div>
<div class="line">        nop</div>
<div class="line">        };        </div>
<div class="line"><span class="preprocessor">#endif     </span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">while</span>(((ICS-&gt;S &amp; ICS_S_CLKST_MASK) &gt;&gt; ICS_S_CLKST_SHIFT) !=2);</div>
<div class="line">        <span class="keywordflow">while</span>(ICS-&gt;S &amp; ICS_S_IREFST_MASK);</div>
<div class="line">            </div>
<div class="line">    <span class="comment">/* now external  clock is the system clock</span></div>
<div class="line"><span class="comment">     * </span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line"><span class="preprocessor">#if defined(CPU_KE02)</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">if</span>(((ICS-&gt;C2 &amp; ICS_C2_BDIV_MASK)&gt;&gt;5) != 1)</div>
<div class="line">    {</div>
<div class="line">        ICS-&gt;C2 = (ICS-&gt;C2 &amp; ~(ICS_C2_BDIV_MASK)) | ICS_C2_BDIV(1);</div>
<div class="line">    }</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor"></span>    ICS-&gt;C2 = (ICS-&gt;C2 &amp; ~(ICS_C2_BDIV_MASK)) | ICS_C2_BDIV(0);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="comment">/* now system/bus clock is external clock</span></div>
<div class="line"><span class="comment">     * </span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="comment">/* clear Loss of lock sticky bit */</span></div>
<div class="line">    ICS-&gt;S |= ICS_S_LOLS_MASK;  </div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/*****************************************************************************/</span></div>
<div class="line"><span class="keywordtype">void</span> FEI_to_FEE_OSC(<a class="code" href="group__ics__config__type.html#struct_i_c_s___config_type" title="ICS configuration type. ">ICS_ConfigType</a> *pConfig)</div>
<div class="line">{</div>
<div class="line"></div>
<div class="line">    <a class="code" href="group__osc__api__list.html#gacddf7fea20d81b353dd74b58aa07a7a3" title="initialize XOSC with given parameters: GAIN, RANGE in control structure. ">OSC_Init</a>(&amp;pConfig-&gt;<a class="code" href="group__ics__config__type.html#a3ba204b64f937bdc71767d9334beea72">oscConfig</a>); <span class="comment">/* enable OSC */</span></div>
<div class="line"></div>
<div class="line">    <span class="comment">/* change RDIV  reference divider to divide reference clock to be with FLL input spec</span></div>
<div class="line"><span class="comment">     * </span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <a class="code" href="group__ics__api__list.html#gaee7a03142594bbfea2a6a8d71b9f857a" title="set clock divider so that the reference clock for FLL/PLL is within spec. ">ICS_SetClkDivider</a>(pConfig-&gt;<a class="code" href="group__ics__config__type.html#a9a397d6975abea4ae001a8a84e565757">u32ClkFreq</a>);</div>
<div class="line"></div>
<div class="line">    <span class="comment">/* change FLL reference clock to external clock */</span></div>
<div class="line">    ICS-&gt;C1 =  ICS-&gt;C1 &amp; ~(ICS_C1_IREFS_MASK);</div>
<div class="line">    </div>
<div class="line">    <span class="comment">/* wait for the reference clock to be changed to external */</span></div>
<div class="line"><span class="preprocessor">#if defined(IAR)        </span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keyword">asm</span>(</div>
<div class="line">        <span class="stringliteral">&quot;nop \n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;nop \n&quot;</span></div>
<div class="line">    );</div>
<div class="line"><span class="preprocessor">#elif defined(__MWERKS__)</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keyword">asm</span>{</div>
<div class="line">        nop </div>
<div class="line">        nop</div>
<div class="line">        };        </div>
<div class="line"><span class="preprocessor">#endif     </span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">while</span>(ICS-&gt;S &amp; ICS_S_IREFST_MASK);</div>
<div class="line">    </div>
<div class="line">    <span class="comment">/* wait for FLL to lock */</span></div>
<div class="line">    <span class="keywordflow">while</span>(!(ICS-&gt;S &amp; ICS_S_LOCK_MASK));</div>
<div class="line"><span class="preprocessor">#if defined(CPU_KE02)       </span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">if</span>(((ICS-&gt;C2 &amp; ICS_C2_BDIV_MASK)&gt;&gt;5) != 1)</div>
<div class="line">    {</div>
<div class="line">        ICS-&gt;C2 = (ICS-&gt;C2 &amp; ~(ICS_C2_BDIV_MASK)) | ICS_C2_BDIV(1);</div>
<div class="line">    }</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor"></span>    ICS-&gt;C2 = (ICS-&gt;C2 &amp; ~(ICS_C2_BDIV_MASK)) | ICS_C2_BDIV(0);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="comment">/* now system/bus clock is the target frequency</span></div>
<div class="line"><span class="comment">     * </span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="comment">/* clear Loss of lock sticky bit */</span></div>
<div class="line">    ICS-&gt;S |= ICS_S_LOLS_MASK;  </div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="comment">/*****************************************************************************/</span></div>
<div class="line"><span class="keywordtype">void</span> FEE_to_FEI(<a class="code" href="group__ics__config__type.html#struct_i_c_s___config_type" title="ICS configuration type. ">ICS_ConfigType</a> *pConfig)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">/* select internal reference for FLL */</span> </div>
<div class="line">    ICS-&gt;C1 =  ICS-&gt;C1 | (ICS_C1_IREFS_MASK);</div>
<div class="line">    </div>
<div class="line">    <span class="comment">/* wait for the reference clock to be changed */</span></div>
<div class="line"><span class="preprocessor">#if defined(IAR)        </span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keyword">asm</span>(</div>
<div class="line">        <span class="stringliteral">&quot;nop \n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;nop \n&quot;</span></div>
<div class="line">    );</div>
<div class="line"><span class="preprocessor">#elif defined(__MWERKS__)</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keyword">asm</span>{</div>
<div class="line">        nop </div>
<div class="line">        nop</div>
<div class="line">        };        </div>
<div class="line"><span class="preprocessor">#endif     </span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">while</span>(!(ICS-&gt;S &amp; ICS_S_IREFST_MASK));</div>
<div class="line">    </div>
<div class="line">    <span class="comment">/* wait for FLL to lock */</span></div>
<div class="line">    <span class="keywordflow">while</span>(!(ICS-&gt;S &amp; ICS_S_LOCK_MASK));</div>
<div class="line"></div>
<div class="line">    <span class="comment">/* clear Loss of lock sticky bit */</span></div>
<div class="line">    ICS-&gt;S |= ICS_S_LOLS_MASK;</div>
<div class="line"></div>
<div class="line">    <span class="comment">/* now FLL output clock is target frequency</span></div>
<div class="line"><span class="comment">     * </span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line"><span class="preprocessor">#if defined(CPU_KE02)</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">if</span>(((ICS-&gt;C2 &amp; ICS_C2_BDIV_MASK)&gt;&gt;5) != 1)</div>
<div class="line">    {</div>
<div class="line">        ICS-&gt;C2 = (ICS-&gt;C2 &amp; ~(ICS_C2_BDIV_MASK)) | ICS_C2_BDIV(1);</div>
<div class="line">    }</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor"></span>    ICS-&gt;C2 = (ICS-&gt;C2 &amp; ~(ICS_C2_BDIV_MASK)) | ICS_C2_BDIV(0);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="comment">/* now system/bus clock is around 16MHz</span></div>
<div class="line"><span class="comment">     * </span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">      <a class="code" href="group__osc__api__list.html#gafbb333ef0d678528623e1499ec5bc767" title="disable OSC. ">OSC_Disable</a>();            <span class="comment">/* disable OSC */</span></div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/*****************************************************************************/</span></div>
<div class="line"><span class="keywordtype">void</span> FEE_to_FBI(<a class="code" href="group__ics__config__type.html#struct_i_c_s___config_type" title="ICS configuration type. ">ICS_ConfigType</a> *pConfig)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">/* clear Loss of lock sticky bit */</span></div>
<div class="line">    ICS-&gt;S |= ICS_S_LOLS_MASK;</div>
<div class="line">    </div>
<div class="line">    <span class="comment">/* select internal clock as clock source */</span></div>
<div class="line">    <span class="comment">/* select internal reference for FLL */</span> </div>
<div class="line">    <span class="comment">/* LP = 0 */</span></div>
<div class="line"></div>
<div class="line">    ICS-&gt;C1 =  ICS-&gt;C1 | (ICS_C1_IREFS_MASK);</div>
<div class="line">    ICS-&gt;C1 = (ICS-&gt;C1 &amp; ~(ICS_C1_CLKS_MASK)) | ICS_C1_CLKS(1);   </div>
<div class="line">    ICS-&gt;C2 = ICS-&gt;C2 &amp; ~(ICS_C2_LP_MASK); </div>
<div class="line">    </div>
<div class="line">    <span class="comment">/* wait for the reference clock to be changed */</span></div>
<div class="line"><span class="preprocessor">#if defined(IAR)        </span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keyword">asm</span>(</div>
<div class="line">        <span class="stringliteral">&quot;nop \n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;nop \n&quot;</span></div>
<div class="line">    );</div>
<div class="line"><span class="preprocessor">#elif defined(__MWERKS__)</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keyword">asm</span>{</div>
<div class="line">        nop </div>
<div class="line">        nop</div>
<div class="line">        };        </div>
<div class="line"><span class="preprocessor">#endif     </span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">while</span>(!(ICS-&gt;S &amp; ICS_S_IREFST_MASK));</div>
<div class="line">    <span class="keywordflow">while</span>(((ICS-&gt;S &amp; ICS_S_CLKST_MASK) &gt;&gt; ICS_S_CLKST_SHIFT) !=1);</div>
<div class="line">    </div>
<div class="line"><span class="preprocessor">#if defined(BUS_CLK_EQU_CORE_DIVIDE_BY_2)||defined(CPU_KE02)        </span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">if</span>(((ICS-&gt;C2 &amp; ICS_C2_BDIV_MASK)&gt;&gt;5) != 1)</div>
<div class="line">    {</div>
<div class="line">        ICS-&gt;C2 = (ICS-&gt;C2 &amp; ~(ICS_C2_BDIV_MASK)) | ICS_C2_BDIV(1);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor"></span>    ICS-&gt;C2 = (ICS-&gt;C2 &amp; ~(ICS_C2_BDIV_MASK));</div>
<div class="line">       </div>
<div class="line"><span class="preprocessor">#endif    </span></div>
<div class="line"><span class="preprocessor"></span>        <a class="code" href="group__osc__api__list.html#gafbb333ef0d678528623e1499ec5bc767" title="disable OSC. ">OSC_Disable</a>();            </div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="comment">/*****************************************************************************/</span></div>
<div class="line"><span class="keywordtype">void</span> FEE_to_FBE(<a class="code" href="group__ics__config__type.html#struct_i_c_s___config_type" title="ICS configuration type. ">ICS_ConfigType</a> *pConfig)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">/* clear Loss of lock sticky bit */</span></div>
<div class="line">    ICS-&gt;S |= ICS_S_LOLS_MASK;</div>
<div class="line">    </div>
<div class="line">    <span class="comment">/* select the external clock as clock source */</span></div>
<div class="line">        <span class="comment">/* LP = 0 */</span></div>
<div class="line">    ICS-&gt;C1 = (ICS-&gt;C1 &amp; ~(ICS_C1_CLKS_MASK)) | ICS_C1_CLKS(2);   </div>
<div class="line">    ICS-&gt;C2 = ICS-&gt;C2 &amp; ~(ICS_C2_LP_MASK); </div>
<div class="line">    </div>
<div class="line">    <span class="comment">/* wait for the clock source to be changed */</span></div>
<div class="line"><span class="preprocessor">#if defined(IAR)        </span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keyword">asm</span>(</div>
<div class="line">        <span class="stringliteral">&quot;nop \n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;nop \n&quot;</span></div>
<div class="line">    );</div>
<div class="line"><span class="preprocessor">#elif defined(__MWERKS__)</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keyword">asm</span>{</div>
<div class="line">        nop </div>
<div class="line">        nop</div>
<div class="line">        };        </div>
<div class="line"><span class="preprocessor">#endif     </span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">while</span>(((ICS-&gt;S &amp; ICS_S_CLKST_MASK) &gt;&gt; ICS_S_CLKST_SHIFT) !=2);</div>
<div class="line">    </div>
<div class="line">    <span class="comment">/* now system clock source is external clock</span></div>
<div class="line"><span class="comment">     * NOTE: make sure that the external clock is within 20MHz </span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line"><span class="preprocessor">#if defined(CPU_KE02)    </span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">if</span>(((ICS-&gt;C2 &amp; ICS_C2_BDIV_MASK)&gt;&gt;5) != 1)</div>
<div class="line">    {</div>
<div class="line">        ICS-&gt;C2 = (ICS-&gt;C2 &amp; ~(ICS_C2_BDIV_MASK)) | ICS_C2_BDIV(1);</div>
<div class="line">    }   </div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor"></span>    ICS-&gt;C2 = (ICS-&gt;C2 &amp; ~(ICS_C2_BDIV_MASK)) | ICS_C2_BDIV(0);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="comment">/*****************************************************************************/</span></div>
<div class="line"><span class="keywordtype">void</span> FBI_to_FBE(<a class="code" href="group__ics__config__type.html#struct_i_c_s___config_type" title="ICS configuration type. ">ICS_ConfigType</a> *pConfig)</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="group__osc__api__list.html#gacddf7fea20d81b353dd74b58aa07a7a3" title="initialize XOSC with given parameters: GAIN, RANGE in control structure. ">OSC_Init</a>(&amp;pConfig-&gt;<a class="code" href="group__ics__config__type.html#a3ba204b64f937bdc71767d9334beea72">oscConfig</a>); <span class="comment">/* enable OSC */</span></div>
<div class="line">    </div>
<div class="line">    <span class="comment">/* select external reference clock */</span></div>
<div class="line">    <span class="comment">/* select the external clock as clock source */</span></div>
<div class="line"></div>
<div class="line">    ICS-&gt;C1 =  ICS-&gt;C1 &amp; ~(ICS_C1_IREFS_MASK);</div>
<div class="line">    ICS-&gt;C1 = (ICS-&gt;C1 &amp; ~(ICS_C1_CLKS_MASK)) | ICS_C1_CLKS(2);   </div>
<div class="line">    </div>
<div class="line">    <span class="comment">/* wait for the clock source to be changed */</span></div>
<div class="line"><span class="preprocessor">#if defined(IAR)        </span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keyword">asm</span>(</div>
<div class="line">        <span class="stringliteral">&quot;nop \n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;nop \n&quot;</span></div>
<div class="line">    );</div>
<div class="line"><span class="preprocessor">#elif defined(__MWERKS__)</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keyword">asm</span>{</div>
<div class="line">        nop </div>
<div class="line">        nop</div>
<div class="line">        };        </div>
<div class="line"><span class="preprocessor">#endif     </span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">while</span>(((ICS-&gt;S &amp; ICS_S_CLKST_MASK) &gt;&gt; ICS_S_CLKST_SHIFT) !=2);</div>
<div class="line">    <span class="keywordflow">while</span>((ICS-&gt;S &amp; ICS_S_IREFST_MASK));</div>
<div class="line">    </div>
<div class="line">    <span class="comment">/* now system clock source is external clock</span></div>
<div class="line"><span class="comment">     * NOTE: make sure that the external clock is within 20MHz </span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line"><span class="preprocessor">#if defined(CPU_KE02)</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">if</span>(((ICS-&gt;C2 &amp; ICS_C2_BDIV_MASK)&gt;&gt;5) != 1)</div>
<div class="line">    {</div>
<div class="line">        ICS-&gt;C2 = (ICS-&gt;C2 &amp; ~(ICS_C2_BDIV_MASK)) | ICS_C2_BDIV(1);</div>
<div class="line">    }   </div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor"></span>    ICS-&gt;C2 = (ICS-&gt;C2 &amp; ~(ICS_C2_BDIV_MASK)) | ICS_C2_BDIV(0);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="comment">/*****************************************************************************/</span></div>
<div class="line"><span class="keywordtype">void</span> FBI_to_FEE(<a class="code" href="group__ics__config__type.html#struct_i_c_s___config_type" title="ICS configuration type. ">ICS_ConfigType</a> *pConfig)</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="group__osc__api__list.html#gacddf7fea20d81b353dd74b58aa07a7a3" title="initialize XOSC with given parameters: GAIN, RANGE in control structure. ">OSC_Init</a>(&amp;pConfig-&gt;<a class="code" href="group__ics__config__type.html#a3ba204b64f937bdc71767d9334beea72">oscConfig</a>); <span class="comment">/* enable OSC */</span></div>
<div class="line">  </div>
<div class="line">    <span class="comment">/* select external reference clock */</span></div>
<div class="line">    <span class="comment">/* select the FLL output as clock source */</span></div>
<div class="line"></div>
<div class="line">    ICS-&gt;C1 =  ICS-&gt;C1 &amp; ~(ICS_C1_IREFS_MASK);</div>
<div class="line">    ICS-&gt;C1 = (ICS-&gt;C1 &amp; ~(ICS_C1_CLKS_MASK));   </div>
<div class="line">    </div>
<div class="line">    <span class="comment">/* wait for the clock source to be changed */</span></div>
<div class="line"><span class="preprocessor">#if defined(IAR)        </span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keyword">asm</span>(</div>
<div class="line">        <span class="stringliteral">&quot;nop \n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;nop \n&quot;</span></div>
<div class="line">    );</div>
<div class="line"><span class="preprocessor">#elif defined(__MWERKS__)</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keyword">asm</span>{</div>
<div class="line">        nop </div>
<div class="line">        nop</div>
<div class="line">        };        </div>
<div class="line"><span class="preprocessor">#endif     </span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">    <span class="keywordflow">while</span>((ICS-&gt;S &amp; ICS_S_CLKST_MASK));</div>
<div class="line">    <span class="keywordflow">while</span>((ICS-&gt;S &amp; ICS_S_IREFST_MASK));</div>
<div class="line">    </div>
<div class="line">    </div>
<div class="line">    <span class="comment">/* now system clock source is external clock</span></div>
<div class="line"><span class="comment">     * NOTE: make sure that the external clock is within 20MHz </span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line"><span class="preprocessor">#if defined(CPU_KE02)</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">if</span>(((ICS-&gt;C2 &amp; ICS_C2_BDIV_MASK)&gt;&gt;5) != 1)</div>
<div class="line">    {</div>
<div class="line">        ICS-&gt;C2 = (ICS-&gt;C2 &amp; ~(ICS_C2_BDIV_MASK)) | ICS_C2_BDIV(1);</div>
<div class="line">    }</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor"></span>    ICS-&gt;C2 = (ICS-&gt;C2 &amp; ~(ICS_C2_BDIV_MASK)) | ICS_C2_BDIV(0);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="comment">/* clear Loss of lock sticky bit */</span></div>
<div class="line">    ICS-&gt;S |= ICS_S_LOLS_MASK;  </div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/*****************************************************************************/</span></div>
<div class="line"><span class="keywordtype">void</span> FBI_to_FBILP(<a class="code" href="group__ics__config__type.html#struct_i_c_s___config_type" title="ICS configuration type. ">ICS_ConfigType</a> *pConfig)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">/* assume external crystal is 8Mhz or 4MHz</span></div>
<div class="line"><span class="comment">     * </span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    ICS-&gt;C2 |= ICS_C2_LP_MASK;  <span class="comment">/* enter low power mode */</span></div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="comment">/*****************************************************************************/</span></div>
<div class="line"><span class="keywordtype">void</span> FBI_to_FEI(<a class="code" href="group__ics__config__type.html#struct_i_c_s___config_type" title="ICS configuration type. ">ICS_ConfigType</a> *pConfig)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">/* select internal reference clock */</span></div>
<div class="line">    <span class="comment">/* select the FLL output as clock source */</span></div>
<div class="line">    ICS-&gt;C1 =  ICS-&gt;C1 | (ICS_C1_IREFS_MASK);</div>
<div class="line">    ICS-&gt;C1 = (ICS-&gt;C1 &amp; ~(ICS_C1_CLKS_MASK));   </div>
<div class="line">    </div>
<div class="line">    <span class="comment">/* wait for the clock source to be changed */</span></div>
<div class="line"><span class="preprocessor">#if defined(IAR)        </span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keyword">asm</span>(</div>
<div class="line">        <span class="stringliteral">&quot;nop \n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;nop \n&quot;</span></div>
<div class="line">    );</div>
<div class="line"><span class="preprocessor">#elif defined(__MWERKS__)</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keyword">asm</span>{</div>
<div class="line">        nop </div>
<div class="line">        nop</div>
<div class="line">        };        </div>
<div class="line"><span class="preprocessor">#endif     </span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">while</span>((ICS-&gt;S &amp; ICS_S_CLKST_MASK));</div>
<div class="line">    <span class="keywordflow">while</span>(!(ICS-&gt;S &amp; ICS_S_IREFST_MASK));</div>
<div class="line"></div>
<div class="line">        </div>
<div class="line">    <span class="comment">/* now system clock source is FLL output</span></div>
<div class="line"><span class="comment">     * </span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line"><span class="preprocessor">#if defined(CPU_KE02)</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">if</span>(((ICS-&gt;C2 &amp; ICS_C2_BDIV_MASK)&gt;&gt;5) != 1)</div>
<div class="line">    {</div>
<div class="line">        ICS-&gt;C2 = (ICS-&gt;C2 &amp; ~(ICS_C2_BDIV_MASK)) | ICS_C2_BDIV(1);</div>
<div class="line">    }   </div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor"></span>    ICS-&gt;C2 = (ICS-&gt;C2 &amp; ~(ICS_C2_BDIV_MASK)) | ICS_C2_BDIV(0);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="comment">/* clear Loss of lock sticky bit */</span></div>
<div class="line">    ICS-&gt;S |= ICS_S_LOLS_MASK;  </div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="comment">/*****************************************************************************/</span></div>
<div class="line"><span class="keywordtype">void</span> FBE_to_FBI(<a class="code" href="group__ics__config__type.html#struct_i_c_s___config_type" title="ICS configuration type. ">ICS_ConfigType</a> *pConfig)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">/* select internal reference clock */</span></div>
<div class="line">    <span class="comment">/* select the internal clock as clock source */</span></div>
<div class="line">    ICS-&gt;C1 =  ICS-&gt;C1 | (ICS_C1_IREFS_MASK);</div>
<div class="line">    ICS-&gt;C1 = (ICS-&gt;C1 &amp; ~(ICS_C1_CLKS_MASK)) | ICS_C1_CLKS(1);   </div>
<div class="line">    </div>
<div class="line">    <span class="comment">/* wait for the clock source to be changed */</span></div>
<div class="line"><span class="preprocessor">#if defined(IAR)        </span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keyword">asm</span>(</div>
<div class="line">        <span class="stringliteral">&quot;nop \n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;nop \n&quot;</span></div>
<div class="line">    );</div>
<div class="line"><span class="preprocessor">#elif defined(__MWERKS__)</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keyword">asm</span>{</div>
<div class="line">        nop </div>
<div class="line">        nop</div>
<div class="line">        };        </div>
<div class="line"><span class="preprocessor">#endif     </span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">while</span>(((ICS-&gt;S &amp; ICS_S_CLKST_MASK) &gt;&gt; ICS_S_CLKST_SHIFT) != 1);</div>
<div class="line">    <span class="keywordflow">while</span>(!(ICS-&gt;S &amp; ICS_S_IREFST_MASK));</div>
<div class="line">    </div>
<div class="line">    <span class="comment">/* now system clock source is internal clock</span></div>
<div class="line"><span class="comment">     * </span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">     </div>
<div class="line"><span class="preprocessor">#if defined(CPU_KE02)</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">if</span>(((ICS-&gt;C2 &amp; ICS_C2_BDIV_MASK)&gt;&gt;5) != 1)</div>
<div class="line">    {</div>
<div class="line">        ICS-&gt;C2 = (ICS-&gt;C2 &amp; ~(ICS_C2_BDIV_MASK)) | ICS_C2_BDIV(1);</div>
<div class="line">    }   </div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor"></span>    ICS-&gt;C2 = (ICS-&gt;C2 &amp; ~(ICS_C2_BDIV_MASK)) | ICS_C2_BDIV(0);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>        </div>
<div class="line">    <span class="comment">/* Disable OSC to save power</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <a class="code" href="group__osc__api__list.html#gafbb333ef0d678528623e1499ec5bc767" title="disable OSC. ">OSC_Disable</a>();</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/*****************************************************************************/</span></div>
<div class="line"><span class="keywordtype">void</span> FBE_to_FEE(<a class="code" href="group__ics__config__type.html#struct_i_c_s___config_type" title="ICS configuration type. ">ICS_ConfigType</a> *pConfig)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">/* select the FLL output as clock source */</span></div>
<div class="line">    ICS-&gt;C1 = (ICS-&gt;C1 &amp; ~(ICS_C1_CLKS_MASK));   </div>
<div class="line">    </div>
<div class="line">    <span class="comment">/* wait for the clock source to be changed */</span></div>
<div class="line"><span class="preprocessor">#if defined(IAR)        </span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keyword">asm</span>(</div>
<div class="line">        <span class="stringliteral">&quot;nop \n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;nop \n&quot;</span></div>
<div class="line">    );</div>
<div class="line"><span class="preprocessor">#elif defined(__MWERKS__)</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keyword">asm</span>{</div>
<div class="line">        nop </div>
<div class="line">        nop</div>
<div class="line">        };        </div>
<div class="line"><span class="preprocessor">#endif     </span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">while</span>(ICS-&gt;S &amp; ICS_S_CLKST_MASK);</div>
<div class="line"></div>
<div class="line">    </div>
<div class="line">    <span class="comment">/* now system clock source is FLL output</span></div>
<div class="line"><span class="comment">     * NOTE: external clock &lt;= 20MHz</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line"><span class="preprocessor">#if defined(CPU_KE02)</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">if</span>(((ICS-&gt;C2 &amp; ICS_C2_BDIV_MASK)&gt;&gt;5) != 1)</div>
<div class="line">    {</div>
<div class="line">        ICS-&gt;C2 = (ICS-&gt;C2 &amp; ~(ICS_C2_BDIV_MASK)) | ICS_C2_BDIV(1);</div>
<div class="line">    }   </div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor"></span>    ICS-&gt;C2 = (ICS-&gt;C2 &amp; ~(ICS_C2_BDIV_MASK)) | ICS_C2_BDIV(0);</div>
<div class="line"><span class="preprocessor">#endif  </span></div>
<div class="line"><span class="preprocessor"></span>    <span class="comment">/* clear Loss of lock sticky bit */</span></div>
<div class="line">    ICS-&gt;S |= ICS_S_LOLS_MASK;  </div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="comment">/*****************************************************************************/</span></div>
<div class="line"><span class="keywordtype">void</span> FBE_to_FEI(<a class="code" href="group__ics__config__type.html#struct_i_c_s___config_type" title="ICS configuration type. ">ICS_ConfigType</a> *pConfig)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">/* select internal reference clock */</span></div>
<div class="line">    <span class="comment">/* select the internal clock as clock source */</span></div>
<div class="line"></div>
<div class="line">    ICS-&gt;C1 =  ICS-&gt;C1 | (ICS_C1_IREFS_MASK);</div>
<div class="line">    ICS-&gt;C1 = (ICS-&gt;C1 &amp; ~(ICS_C1_CLKS_MASK));   </div>
<div class="line">    </div>
<div class="line">    <span class="comment">/* wait for the clock source to be changed */</span></div>
<div class="line"><span class="preprocessor">#if defined(IAR)        </span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keyword">asm</span>(</div>
<div class="line">        <span class="stringliteral">&quot;nop \n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;nop \n&quot;</span></div>
<div class="line">    );</div>
<div class="line"><span class="preprocessor">#elif defined(__MWERKS__)</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keyword">asm</span>{</div>
<div class="line">        nop </div>
<div class="line">        nop</div>
<div class="line">        };        </div>
<div class="line"><span class="preprocessor">#endif     </span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">while</span>((ICS-&gt;S &amp; ICS_S_CLKST_MASK));</div>
<div class="line">    <span class="keywordflow">while</span>(!(ICS-&gt;S &amp; ICS_S_IREFST_MASK));</div>
<div class="line"><span class="preprocessor">#if defined(CPU_KE02)   </span></div>
<div class="line"><span class="preprocessor"></span>    <span class="comment">/* now system clock source is internal clock</span></div>
<div class="line"><span class="comment">     * </span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordflow">if</span>(((ICS-&gt;C2 &amp; ICS_C2_BDIV_MASK)&gt;&gt;5) != 1)</div>
<div class="line">    {</div>
<div class="line">        ICS-&gt;C2 = (ICS-&gt;C2 &amp; ~(ICS_C2_BDIV_MASK)) | ICS_C2_BDIV(1);</div>
<div class="line">    }</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor"></span>        ICS-&gt;C2 = (ICS-&gt;C2 &amp; ~(ICS_C2_BDIV_MASK)) | ICS_C2_BDIV(0);</div>
<div class="line"><span class="preprocessor">#endif  </span></div>
<div class="line"><span class="preprocessor"></span>    <span class="comment">/* clear Loss of lock sticky bit */</span></div>
<div class="line">    ICS-&gt;S |= ICS_S_LOLS_MASK;  </div>
<div class="line">        </div>
<div class="line">    <span class="comment">/* Disable OSC to save power</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <a class="code" href="group__osc__api__list.html#gafbb333ef0d678528623e1499ec5bc767" title="disable OSC. ">OSC_Disable</a>();</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="comment">/*****************************************************************************/</span></div>
<div class="line"><span class="keywordtype">void</span> FBE_to_FBELP(<a class="code" href="group__ics__config__type.html#struct_i_c_s___config_type" title="ICS configuration type. ">ICS_ConfigType</a> *pConfig)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">/* enter low power mode */</span></div>
<div class="line">    ICS-&gt;C2 = ICS-&gt;C2 | (ICS_C2_LP_MASK); </div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="comment">/*****************************************************************************/</span></div>
<div class="line"><span class="keywordtype">void</span> FBELP_to_FBE(<a class="code" href="group__ics__config__type.html#struct_i_c_s___config_type" title="ICS configuration type. ">ICS_ConfigType</a> *pConfig)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">/* enter low power mode */</span></div>
<div class="line">    ICS-&gt;C2 = ICS-&gt;C2 &amp; ~(ICS_C2_LP_MASK); </div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/*****************************************************************************/</span></div>
<div class="line"><span class="keywordtype">void</span> FBILP_to_FBI(<a class="code" href="group__ics__config__type.html#struct_i_c_s___config_type" title="ICS configuration type. ">ICS_ConfigType</a> *pConfig)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">/* enter low power mode */</span></div>
<div class="line">    ICS-&gt;C2 = ICS-&gt;C2 &amp; ~(ICS_C2_LP_MASK); </div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/******************************************************************************</span></div>
<div class="line"><span class="comment">* define ICS API list</span></div>
<div class="line"><span class="comment">*</span></div>
<div class="line"><span class="comment">*/</span></div>
<div class="line"><span class="comment">/*****************************************************************************/</span></div>
<div class="line"><span class="keywordtype">void</span> <a class="code" href="group__ics__api__list.html#ga6324833a0b759c61806b2e2e83961463" title="trim internal clock (IRC). ">ICS_Trim</a>(uint16_t u16TrimValue)</div>
<div class="line">{</div>
<div class="line">   ICS-&gt;C3 =  (uint8_t) u16TrimValue;</div>
<div class="line">   ICS-&gt;C4 = (ICS-&gt;C4 &amp; ~(ICS_C4_SCFTRIM_MASK)) | ((u16TrimValue&gt;&gt;8) &amp; 0x01);</div>
<div class="line">   <span class="keywordflow">while</span>(!(ICS-&gt;S &amp; ICS_S_LOCK_MASK));    </div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="comment">/*****************************************************************************/</span></div>
<div class="line"><span class="keywordtype">void</span> <a class="code" href="group__ics__api__list.html#gaee7a03142594bbfea2a6a8d71b9f857a" title="set clock divider so that the reference clock for FLL/PLL is within spec. ">ICS_SetClkDivider</a>(uint32_t u32ClkFreqKHz)</div>
<div class="line">{</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">switch</span>(u32ClkFreqKHz)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">case</span> 8000L:</div>
<div class="line">        <span class="keywordflow">case</span> 10000L:</div>
<div class="line">            <span class="comment">/* 8MHz or 10MHz */</span></div>
<div class="line">            ICS-&gt;C1 = (ICS-&gt;C1 &amp; ~(ICS_C1_RDIV_MASK)) | ICS_C1_RDIV(3); <span class="comment">/* now the divided frequency is 8000/256 = 31.25K */</span></div>
<div class="line">                                                                        <span class="comment">/* now the divided frequency is 10000/256 = 39.0625K */</span></div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> 4000L:</div>
<div class="line">            <span class="comment">/* 4MHz */</span></div>
<div class="line">            ICS-&gt;C1 = (ICS-&gt;C1 &amp; ~(ICS_C1_RDIV_MASK)) | ICS_C1_RDIV(2); <span class="comment">/* now the divided frequency is 4000/128 = 31.25K */</span></div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> 16000L:</div>
<div class="line">            <span class="comment">/* 16MHz */</span></div>
<div class="line">            ICS-&gt;C1 = (ICS-&gt;C1 &amp; ~(ICS_C1_RDIV_MASK)) | ICS_C1_RDIV(4); <span class="comment">/* now the divided frequency is 16000/512 = 31.25K */</span></div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> 20000L:</div>
<div class="line">            <span class="comment">/* 20MHz */</span></div>
<div class="line">            ICS-&gt;C1 = (ICS-&gt;C1 &amp; ~(ICS_C1_RDIV_MASK)) | ICS_C1_RDIV(4);     <span class="comment">/* now the divided frequency is 20000/512 = 39.0625K */</span></div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> 32L:</div>
<div class="line">            <span class="comment">/* 32KHz */</span></div>
<div class="line">            ICS-&gt;C1  &amp;= ~(ICS_C1_RDIV_MASK);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">default</span>:</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/*****************************************************************************/</span></div>
<div class="line"><span class="keywordtype">void</span> <a class="code" href="group__ics__api__list.html#ga18aeac6aa349832111fe4d4ddec8fe5a" title="initialize ICS to the desired clock as defined in BUS_CLK_HZ. ">ICS_Init</a>(<a class="code" href="group__ics__config__type.html#struct_i_c_s___config_type" title="ICS configuration type. ">ICS_ConfigType</a> *pConfig)</div>
<div class="line">{</div>
<div class="line">  <span class="keywordflow">if</span>(pConfig-&gt;<a class="code" href="group__ics__config__type.html#a078d8b4f1b31e354d5b868fe1e7a62cb">u8ClkMode</a> == <a class="code" href="group__ics__clock__mode.html#ggabed82baf7f470b522273a3e37c24c600a1dc4faeb2a06aa378df5b2718cf2e018">ICS_CLK_MODE_FEE</a>)</div>
<div class="line">  {    </div>
<div class="line">        pConfig-&gt;<a class="code" href="group__ics__config__type.html#a3ba204b64f937bdc71767d9334beea72">oscConfig</a>.<a class="code" href="group__osc__config__type.html#a67e3220ce4949fbbc777085bb3fcb5c9">bIsCryst</a> = 1;        <span class="comment">/* is crystal */</span>      </div>
<div class="line">        pConfig-&gt;<a class="code" href="group__ics__config__type.html#a3ba204b64f937bdc71767d9334beea72">oscConfig</a>.<a class="code" href="group__osc__config__type.html#af376e7ca27d9826c60b6782172ca899c">bWaitInit</a> = 1;        <span class="comment">/* wait init complete */</span>      </div>
<div class="line">        FEI_to_FEE(pConfig);                     <span class="comment">/* switch to FEE mode with external crystal  */</span></div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pConfig-&gt;<a class="code" href="group__ics__config__type.html#a078d8b4f1b31e354d5b868fe1e7a62cb">u8ClkMode</a> == <a class="code" href="group__ics__clock__mode.html#ggabed82baf7f470b522273a3e37c24c600ac6b42261be1e83504cfd08c2305b9ce6">ICS_CLK_MODE_FEE_OSC</a>)</div>
<div class="line">  {     </div>
<div class="line">        pConfig-&gt;<a class="code" href="group__ics__config__type.html#a3ba204b64f937bdc71767d9334beea72">oscConfig</a>.<a class="code" href="group__osc__config__type.html#a67e3220ce4949fbbc777085bb3fcb5c9">bIsCryst</a> = 0;        <span class="comment">/* is clock */</span>      </div>
<div class="line">        FEI_to_FEE_OSC(pConfig);                <span class="comment">/* switch to FEE mode with active oscillator input */</span></div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pConfig-&gt;<a class="code" href="group__ics__config__type.html#a078d8b4f1b31e354d5b868fe1e7a62cb">u8ClkMode</a> == <a class="code" href="group__ics__clock__mode.html#ggabed82baf7f470b522273a3e37c24c600a6d46729b7d1acb653980b51ecfbb496b">ICS_CLK_MODE_FBE_OSC</a>)</div>
<div class="line">  {</div>
<div class="line">        pConfig-&gt;<a class="code" href="group__ics__config__type.html#a3ba204b64f937bdc71767d9334beea72">oscConfig</a>.<a class="code" href="group__osc__config__type.html#a67e3220ce4949fbbc777085bb3fcb5c9">bIsCryst</a> = 0;        <span class="comment">/* is clock */</span>            </div>
<div class="line">        FEI_to_FBE_OSC(pConfig);                <span class="comment">/* switch to FBE mode with active oscillator input */</span></div>
<div class="line">  } </div>
<div class="line">  <span class="keywordflow">else</span></div>
<div class="line">  {</div>
<div class="line">        <span class="comment">/* FEI mode by default */</span></div>
<div class="line"><span class="preprocessor">        #if defined(CPU_KE02)</span></div>
<div class="line"><span class="preprocessor"></span>        <span class="keywordflow">if</span>(((ICS-&gt;C2 &amp; ICS_C2_BDIV_MASK)&gt;&gt;5) != 1)</div>
<div class="line">        {</div>
<div class="line">            ICS-&gt;C2 = (ICS-&gt;C2 &amp; ~(ICS_C2_BDIV_MASK)) | ICS_C2_BDIV(1);</div>
<div class="line">        }</div>
<div class="line"><span class="preprocessor">        #else</span></div>
<div class="line"><span class="preprocessor"></span>            ICS-&gt;C2 = (ICS-&gt;C2 &amp; ~(ICS_C2_BDIV_MASK)) | ICS_C2_BDIV(0);</div>
<div class="line"><span class="preprocessor">        #endif</span></div>
<div class="line"><span class="preprocessor"></span>  }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/*****************************************************************************/</span></div>
<div class="line"><span class="keywordtype">void</span> <a class="code" href="group__ics__api__list.html#ga178e9ccc02ef310f72028c3a54f4513c" title="initialize ICS to the default state. ">ICS_DeInit</a>(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    ICS-&gt;C1 = ICS_C1_DEFAULT;</div>
<div class="line">    ICS-&gt;C2 = ICS_C2_DEFAULT;</div>
<div class="line">    ICS-&gt;C3 = ICS_C3_DEFAULT;</div>
<div class="line">    ICS-&gt;C4 = ICS_C4_DEFAULT;</div>
<div class="line">    <span class="keywordflow">while</span>(ICS-&gt;S != ICS_S_DEFAULT)</div>
<div class="line">        ;       </div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/******************************************************************************</span></div>
<div class="line"><span class="comment">* define OSC API list</span></div>
<div class="line"><span class="comment">*</span></div>
<div class="line"><span class="comment">*/</span></div>
<div class="line"><span class="comment">/*****************************************************************************/</span></div>
<div class="line"><span class="keywordtype">void</span> <a class="code" href="group__osc__api__list.html#gacddf7fea20d81b353dd74b58aa07a7a3" title="initialize XOSC with given parameters: GAIN, RANGE in control structure. ">OSC_Init</a>(<a class="code" href="group__osc__config__type.html#struct_o_s_c___config_type" title="OSC configuration type. ">OSC_ConfigType</a> *pConfig)</div>
<div class="line">{</div>
<div class="line">    uint8   cr = 0;</div>
<div class="line">    <span class="comment">/* </span></div>
<div class="line"><span class="comment">     * </span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordflow">if</span>(pConfig-&gt;<a class="code" href="group__osc__config__type.html#aa60023866b1ae5a2c15ed9819837ae8c">bGain</a>)</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">/* high gain */</span></div>
<div class="line">        cr |= OSC_CR_HGO_MASK ;     <span class="comment">/* Rs must be added and be large up to 200K */</span></div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">if</span>(pConfig-&gt;<a class="code" href="group__osc__config__type.html#ae75f7820d6fe4926b4289b056d94e3c4">bRange</a>)</div>
<div class="line">    {</div>
<div class="line">        cr |= OSC_CR_RANGE_MASK; <span class="comment">/* high range */</span>   </div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span>(pConfig-&gt;<a class="code" href="group__osc__config__type.html#aff320e579596e3208071e268b676422a">bStopEnable</a>)</div>
<div class="line">    {</div>
<div class="line">        cr |= OSC_CR_OSCSTEN_MASK; </div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span>(pConfig-&gt;<a class="code" href="group__osc__config__type.html#a67e3220ce4949fbbc777085bb3fcb5c9">bIsCryst</a>)</div>
<div class="line">    {</div>
<div class="line">        cr |= OSC_CR_OSCOS_MASK;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span>(pConfig-&gt;<a class="code" href="group__osc__config__type.html#aba7d9fc5779dab49ce50341af0ee52c1">bEnable</a>)</div>
<div class="line">    {</div>
<div class="line">        cr |= OSC_CR_OSCEN_MASK;</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    OSC-&gt;CR = cr;</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">if</span>(pConfig-&gt;<a class="code" href="group__osc__config__type.html#af376e7ca27d9826c60b6782172ca899c">bWaitInit</a>)</div>
<div class="line">    {</div>
<div class="line"></div>
<div class="line">        <span class="comment">/* wait for OSC to be initialized</span></div>
<div class="line"><span class="comment">         * </span></div>
<div class="line"><span class="comment">         */</span></div>
<div class="line">        <span class="keywordflow">while</span>(!(OSC-&gt;CR &amp; OSC_CR_OSCINIT_MASK));</div>
<div class="line">        </div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/*****************************************************************************/</span></div>
<div class="line"><span class="keywordtype">void</span> <a class="code" href="group__osc__api__list.html#gaedda4109b30ef08ef6ac708cdc7bdab8" title="initialize OSC to the default state. ">OSC_DeInit</a>(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    OSC-&gt;CR = OSC_CR_DEFAULT;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
</div><!-- fragment --> </dd></dl>
<dl class="section user"><dt>ke04_config.h:</dt><dd><div class="fragment"><div class="line"><span class="comment">/******************************************************************************</span></div>
<div class="line"><span class="comment">*</span></div>
<div class="line"><span class="comment">* Freescale Semiconductor Inc.</span></div>
<div class="line"><span class="comment">* (c) Copyright 2013 Freescale Semiconductor, Inc.</span></div>
<div class="line"><span class="comment">* ALL RIGHTS RESERVED.</span></div>
<div class="line"><span class="comment">*</span></div>
<div class="line"><span class="comment">***************************************************************************</span></div>
<div class="line"><span class="comment">*</span></div>
<div class="line"><span class="comment">* THIS SOFTWARE IS PROVIDED BY FREESCALE &quot;AS IS&quot; AND ANY EXPRESSED OR</span></div>
<div class="line"><span class="comment">* IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES</span></div>
<div class="line"><span class="comment">* OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.</span></div>
<div class="line"><span class="comment">* IN NO EVENT SHALL FREESCALE OR ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT,</span></div>
<div class="line"><span class="comment">* INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES</span></div>
<div class="line"><span class="comment">* (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR</span></div>
<div class="line"><span class="comment">* SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)</span></div>
<div class="line"><span class="comment">* HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,</span></div>
<div class="line"><span class="comment">* STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING</span></div>
<div class="line"><span class="comment">* IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF</span></div>
<div class="line"><span class="comment">* THE POSSIBILITY OF SUCH DAMAGE.</span></div>
<div class="line"><span class="comment">*</span></div>
<div class="line"><span class="comment">***************************************************************************/</span></div>
<div class="line"><span class="preprocessor">#ifndef _KExx_CONFIG_H_</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define _KExx_CONFIG_H_</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="comment">/******************************************************************************</span></div>
<div class="line"><span class="comment">* Includes</span></div>
<div class="line"><span class="comment">******************************************************************************/</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdint.h&gt;</span></div>
<div class="line"><span class="comment">/******************************************************************************</span></div>
<div class="line"><span class="comment">* Constants</span></div>
<div class="line"><span class="comment">******************************************************************************/</span></div>
<div class="line"></div>
<div class="line"><span class="comment">/******************************************************************************</span></div>
<div class="line"><span class="comment">* Macros</span></div>
<div class="line"><span class="comment">******************************************************************************/</span></div>
<div class="line"></div>
<div class="line"><span class="comment">//#define     TEST_ON_EVB           /*!&lt; if running on freedom board, this line must be commented */</span></div>
<div class="line"><span class="preprocessor">#define TRIM_IRC                    </span></div>
<div class="line"><span class="preprocessor">//#define SPI0_PINREMAP               </span></div>
<div class="line"><span class="preprocessor">#define DISABLE_NMI                 </span></div>
<div class="line"><span class="preprocessor">#define FTMRH           FTMRE</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTM1            NULL</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define UART1           NULL</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define UART2           NULL</span></div>
<div class="line"><span class="preprocessor"></span><span class="comment">/* FCLKDIV Bit Fields */</span>                                                                                  </div>
<div class="line"><span class="preprocessor">#define FTMRH_FCLKDIV_FDIV_MASK         FTMRE_FCLKDIV_FDIV_MASK                                           </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FCLKDIV_FDIV_SHIFT        FTMRE_FCLKDIV_FDIV_SHIFT                                          </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FCLKDIV_FDIV(x)           FTMRE_FCLKDIV_FDIV(x)                                             </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FCLKDIV_FDIVLCK_MASK      FTMRE_FCLKDIV_FDIVLCK_MASK                                        </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FCLKDIV_FDIVLCK_SHIFT     FTMRE_FCLKDIV_FDIVLCK_SHIFT                                       </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FCLKDIV_FDIVLD_MASK       FTMRE_FCLKDIV_FDIVLD_MASK                                         </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FCLKDIV_FDIVLD_SHIFT      FTMRE_FCLKDIV_FDIVLD_SHIFT                                        </span></div>
<div class="line"><span class="preprocessor"></span><span class="comment">/* FSEC Bit Fields */</span>                                                                         </div>
<div class="line"><span class="preprocessor">#define FTMRH_FSEC_SEC_MASK             FTMRE_FSEC_SEC_MASK                                               </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FSEC_SEC_SHIFT            FTMRE_FSEC_SEC_SHIFT                                              </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FSEC_SEC(x)               FTMRE_FSEC_SEC(x)                                                 </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FSEC_KEYEN_MASK           FTMRE_FSEC_KEYEN_MASK                                             </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FSEC_KEYEN_SHIFT          FTMRE_FSEC_KEYEN_SHIFT                                            </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FSEC_KEYEN(x)             FTMRE_FSEC_KEYEN(x)                                               </span></div>
<div class="line"><span class="preprocessor"></span><span class="comment">/* FCCOBIX Bit Fields */</span>                                                                         </div>
<div class="line"><span class="preprocessor">#define FTMRH_FCCOBIX_CCOBIX_MASK       FTMRE_FCCOBIX_CCOBIX_MASK                                         </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FCCOBIX_CCOBIX_SHIFT      FTMRE_FCCOBIX_CCOBIX_SHIFT                                        </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FCCOBIX_CCOBIX(x)         FTMRE_FCCOBIX_CCOBIX(x)                                           </span></div>
<div class="line"><span class="preprocessor"></span><span class="comment">/* FCNFG Bit Fields */</span>                                                                      </div>
<div class="line"><span class="preprocessor">#define FTMRH_FCNFG_FSFD_MASK           FTMRE_FCNFG_FSFD_MASK                                             </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FCNFG_FSFD_SHIFT          FTMRE_FCNFG_FSFD_SHIFT                                            </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FCNFG_FDFD_MASK           FTMRE_FCNFG_FDFD_MASK                                             </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FCNFG_FDFD_SHIFT          FTMRE_FCNFG_FDFD_SHIFT                                            </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FCNFG_IGNSF_MASK          FTMRE_FCNFG_IGNSF_MASK                                            </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FCNFG_IGNSF_SHIFT         FTMRE_FCNFG_IGNSF_SHIFT                                           </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FCNFG_CCIE_MASK           FTMRE_FCNFG_CCIE_MASK                                             </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FCNFG_CCIE_SHIFT          FTMRE_FCNFG_CCIE_SHIFT                                            </span></div>
<div class="line"><span class="preprocessor"></span><span class="comment">/* FERCNFG Bit Fields */</span>                                                                    </div>
<div class="line"><span class="preprocessor">#define FTMRH_FERCNFG_SFDIE_MASK        FTMRE_FERCNFG_SFDIE_MASK                                          </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FERCNFG_SFDIE_SHIFT       FTMRE_FERCNFG_SFDIE_SHIFT                                         </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FERCNFG_DFDIE_MASK        FTMRE_FERCNFG_DFDIE_MASK                                          </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FERCNFG_DFDIE_SHIFT       FTMRE_FERCNFG_DFDIE_SHIFT                                         </span></div>
<div class="line"><span class="preprocessor"></span><span class="comment">/* FSTAT Bit Fields */</span>                                                                        </div>
<div class="line"><span class="preprocessor">#define FTMRH_FSTAT_MGSTAT_MASK         FTMRE_FSTAT_MGSTAT_MASK                                           </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FSTAT_MGSTAT_SHIFT        FTMRE_FSTAT_MGSTAT_SHIFT                                          </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FSTAT_MGSTAT(x)           FTMRE_FSTAT_MGSTAT(x)                                             </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FSTAT_MGBUSY_MASK         FTMRE_FSTAT_MGBUSY_MASK                                           </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FSTAT_MGBUSY_SHIFT        FTMRE_FSTAT_MGBUSY_SHIFT                                          </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FSTAT_FPVIOL_MASK         FTMRE_FSTAT_FPVIOL_MASK                                           </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FSTAT_FPVIOL_SHIFT        FTMRE_FSTAT_FPVIOL_SHIFT                                          </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FSTAT_ACCERR_MASK         FTMRE_FSTAT_ACCERR_MASK                                           </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FSTAT_ACCERR_SHIFT        FTMRE_FSTAT_ACCERR_SHIFT                                          </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FSTAT_CCIF_MASK           FTMRE_FSTAT_CCIF_MASK                                             </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FSTAT_CCIF_SHIFT          FTMRE_FSTAT_CCIF_SHIFT                                            </span></div>
<div class="line"><span class="preprocessor"></span><span class="comment">/* FERSTAT Bit Fields */</span>                                                                     </div>
<div class="line"><span class="preprocessor">#define FTMRH_FERSTAT_SFDIF_MASK        FTMRE_FERSTAT_SFDIF_MASK                                          </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FERSTAT_SFDIF_SHIFT       FTMRE_FERSTAT_SFDIF_SHIFT                                         </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FERSTAT_DFDIF_MASK        FTMRE_FERSTAT_DFDIF_MASK                                          </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FERSTAT_DFDIF_SHIFT       FTMRE_FERSTAT_DFDIF_SHIFT                                         </span></div>
<div class="line"><span class="preprocessor"></span><span class="comment">/* FPROT Bit Fields */</span>                                                                   </div>
<div class="line"><span class="preprocessor">#define FTMRH_FPROT_FPLS_MASK           FTMRE_FPROT_FPLS_MASK                                             </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FPROT_FPLS_SHIFT          FTMRE_FPROT_FPLS_SHIFT                                            </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FPROT_FPLS(x)             FTMRE_FPROT_FPLS(x)                                               </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FPROT_FPLDIS_MASK         FTMRE_FPROT_FPLDIS_MASK                                           </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FPROT_FPLDIS_SHIFT        FTMRE_FPROT_FPLDIS_SHIFT                                          </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FPROT_FPHS_MASK           FTMRE_FPROT_FPHS_MASK                                             </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FPROT_FPHS_SHIFT          FTMRE_FPROT_FPHS_SHIFT                                            </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FPROT_FPHS(x)             FTMRE_FPROT_FPHS(x)                                               </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FPROT_FPHDIS_MASK         FTMRE_FPROT_FPHDIS_MASK                                           </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FPROT_FPHDIS_SHIFT        FTMRE_FPROT_FPHDIS_SHIFT                                          </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FPROT_FPOPEN_MASK         FTMRE_FPROT_FPOPEN_MASK                                           </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FPROT_FPOPEN_SHIFT        FTMRE_FPROT_FPOPEN_SHIFT                                          </span></div>
<div class="line"><span class="preprocessor"></span><span class="comment">/* EEPROT Bit Fields */</span>                                                                    </div>
<div class="line"><span class="preprocessor">#define FTMRH_EEPROT_DPS_MASK           FTMRE_EEPROT_DPS_MASK                                             </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_EEPROT_DPS_SHIFT          FTMRE_EEPROT_DPS_SHIFT                                            </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_EEPROT_DPS(x)             FTMRE_EEPROT_DPS(x)                                               </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_EEPROT_DPOPEN_MASK        FTMRE_EEPROT_DPOPEN_MASK                                          </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_EEPROT_DPOPEN_SHIFT       FTMRE_EEPROT_DPOPEN_SHIFT                                         </span></div>
<div class="line"><span class="preprocessor"></span><span class="comment">/* FCCOBHI Bit Fields */</span>                                                                        </div>
<div class="line"><span class="preprocessor">#define FTMRH_FCCOBHI_CCOB_MASK         FTMRE_FCCOBHI_CCOB_MASK                                           </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FCCOBHI_CCOB_SHIFT        FTMRE_FCCOBHI_CCOB_SHIFT                                          </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FCCOBHI_CCOB(x)           FTMRE_FCCOBHI_CCOB(x)                                             </span></div>
<div class="line"><span class="preprocessor"></span><span class="comment">/* FCCOBLO Bit Fields */</span>                                                                      </div>
<div class="line"><span class="preprocessor">#define FTMRH_FCCOBLO_CCOB_MASK         FTMRE_FCCOBLO_CCOB_MASK                                           </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FCCOBLO_CCOB_SHIFT        FTMRE_FCCOBLO_CCOB_SHIFT                                          </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FCCOBLO_CCOB(x)           FTMRE_FCCOBLO_CCOB(x)                                             </span></div>
<div class="line"><span class="preprocessor"></span><span class="comment">/* FOPT Bit Fields */</span>                                                                                </div>
<div class="line"><span class="preprocessor">#define FTMRH_FOPT_NV_MASK              FTMRE_FOPT_NV_MASK                                                </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FOPT_NV_SHIFT             FTMRE_FOPT_NV_SHIFT                                               </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FTMRH_FOPT_NV(x)                FTMRE_FOPT_NV(x)                                                  </span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">         </div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="comment">/* NOTE: for RAM version, comment it */</span></div>
<div class="line"><span class="comment">//#define PRINT_SYS_LOG               /*!&lt; this macro prints system log information */</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#if     !defined(BOOT_LOADER)</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #define PRINT_SYS_LOG           </span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="comment">/* define output bus clock */</span></div>
<div class="line"><span class="comment">//#define OUTPUT_BUSCLK               /*!&lt; this macro allows output of bus clock */</span></div>
<div class="line"><span class="preprocessor">#define ICS_TRIM_VALUE  0x54        </span></div>
<div class="line"><span class="preprocessor">#if defined(TEST_ON_EVB)</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">    #define USE_FEE                       </span></div>
<div class="line"><span class="preprocessor">    //#define USE_FEE_OSC                     </span></div>
<div class="line"><span class="preprocessor">    //#define USE_FEI                       </span></div>
<div class="line"><span class="preprocessor">    </span><span class="comment">/* define external crystal frequency */</span><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor"></span>    <span class="comment">//#define EXT_CLK_FREQ_KHZ  32          /* in KHz */</span></div>
<div class="line">    <span class="comment">//#define EXT_CLK_FREQ_KHZ  4000        /* in KHz */</span></div>
<div class="line"><span class="preprocessor">    #define EXT_CLK_FREQ_KHZ    8000        </span><span class="comment">/* in KHz */</span><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor"></span>    <span class="comment">//#define EXT_CLK_FREQ_KHZ  10000       /* in KHz */</span></div>
<div class="line"></div>
<div class="line">    <span class="comment">//#define CRYST_HIGH_GAIN</span></div>
<div class="line">    <span class="comment">//#define XOSC_STOP_ENABLE</span></div>
<div class="line"></div>
<div class="line">    <span class="comment">/* define SCI port # to be used */</span></div>
<div class="line"><span class="preprocessor">    #define TERM_PORT   UART0               </span></div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">    #define USE_FEE                         </span></div>
<div class="line"><span class="preprocessor">    //#define USE_FEE_OSC                   </span></div>
<div class="line"><span class="preprocessor">    //#define USE_FEI                       </span></div>
<div class="line"><span class="preprocessor">    //#define EXT_CLK_FREQ_KHZ  32          </span><span class="comment">/* in KHz */</span><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor"></span>    <span class="comment">//#define EXT_CLK_FREQ_KHZ  4000        /* in KHz */</span></div>
<div class="line"><span class="preprocessor">    #define EXT_CLK_FREQ_KHZ    8000        </span><span class="comment">/* in KHz */</span><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor"></span>    <span class="comment">//#define EXT_CLK_FREQ_KHZ  10000       /* in KHz */</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #define TERM_PORT   UART0               </span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">    <span class="comment">/* define BUS clock in HZ */</span></div>
<div class="line"><span class="preprocessor">    #if defined(USE_FEI)</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">        #define  BUS_CLK_HZ     24000000L </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #elif  (EXT_CLK_FREQ_KHZ == 20000)</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">        #define  BUS_CLK_HZ     20000000L</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #elif  (EXT_CLK_FREQ_KHZ == 10000)</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">        #define  BUS_CLK_HZ     12500000L</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #elif  (EXT_CLK_FREQ_KHZ == 8000)</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">        #define  BUS_CLK_HZ     20000000L</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #elif  (EXT_CLK_FREQ_KHZ == 4000)</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">        #define  BUS_CLK_HZ     20000000L</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #elif  (EXT_CLK_FREQ_KHZ == 32)</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">        #define  BUS_CLK_HZ     20971520L</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #else   </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">        #define  BUS_CLK_HZ     20000000L</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #endif</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">    #define UART_PRINT_BITRATE              115200      </span></div>
<div class="line"><span class="preprocessor">#define LED0_Init()             GPIOA-&gt;PDDR |= (1&lt;&lt;21)    </span></div>
<div class="line"><span class="preprocessor">#define LED0_Toggle()           GPIOA-&gt;PTOR =  (1&lt;&lt;21) </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define LED0_On()               GPIOA-&gt;PCOR =  (1&lt;&lt;21) </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define LED0_Off()              GPIOA-&gt;PSOR =  (1&lt;&lt;21) </span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">#define LED1_Init()             GPIOA-&gt;PDDR |= (1&lt;&lt;20)    </span></div>
<div class="line"><span class="preprocessor">#define LED1_Toggle()           GPIOA-&gt;PTOR =  (1&lt;&lt;20)  </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define LED1_On()               GPIOA-&gt;PCOR =  (1&lt;&lt;20)  </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define LED1_Off()              GPIOA-&gt;PSOR =  (1&lt;&lt;20)  </span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">#define LED2_Init()             GPIOA-&gt;PDDR |= (1&lt;&lt;11)   </span></div>
<div class="line"><span class="preprocessor">#define LED2_Toggle()           GPIOA-&gt;PTOR =  (1&lt;&lt;11)  </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define LED2_On()               GPIOA-&gt;PCOR =  (1&lt;&lt;11)  </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define LED2_Off()              GPIOA-&gt;PSOR =  (1&lt;&lt;11)  </span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">#define RED_Init()              LED0_Init()</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define RED_Set()               LED0_Off()</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define RED_Clear()             LED0_On()</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define RED_Toggle()            LED0_Toggle()</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">#define GREEN_Init()            LED1_Init()</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define GREEN_Set()             LED1_Off()</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define GREEN_Clear()           LED1_On()</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define GREEN_Toggle()          LED1_Toggle()</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">#define BLUE_Init()             LED2_Init()</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define BLUE_Set()              LED2_Off()</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define BLUE_Clear()            LED2_On()</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define BLUE_Toggle()           LED2_Toggle()</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="comment">/******************************************************************************</span></div>
<div class="line"><span class="comment">* Types</span></div>
<div class="line"><span class="comment">******************************************************************************/</span></div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="comment">/******************************************************************************</span></div>
<div class="line"><span class="comment">* Global variables</span></div>
<div class="line"><span class="comment">******************************************************************************/</span></div>
<div class="line"></div>
<div class="line"><span class="comment">/******************************************************************************</span></div>
<div class="line"><span class="comment">* Global functions</span></div>
<div class="line"><span class="comment">******************************************************************************/</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#endif </span><span class="comment">/* _KExx_CONFIG_H_ */</span><span class="preprocessor"></span></div>
</div><!-- fragment --> </dd></dl>
<dl class="section user"><dt>Toolchain support:</dt><dd><table class="doxtable">
<tr>
<th align="center">IAR EWARM 6.7x</th><th align="center">CW MCU 10.x</th><th align="center">KEIL uVision 5.0  </th></tr>
<tr>
<td align="center">x </td><td align="center">x </td><td align="center">x </td></tr>
</table>
</dd></dl>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Mar 7 2014 18:49:52 for Kinetis E Peripheral Drivers by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.4
</small></address>
</body>
</html>
